"""Test store transactions and transaction items"""

from datetime import UTC, datetime
from decimal import Decimal

# Store transactions - format includes customer info
# Note: key and token will be auto-generated in the command
store_transactions = [
    # Paid transactions for 2024 event (completed)
    {
        "transaction_id": "tx_2024_testuser1",
        "event_pk": 23,
        "user_username": "testuser1",
        "firstname": "Test",
        "lastname": "User",
        "company": "",
        "email": "testuser1@example.com",
        "telephone": "",
        "mobile": "+358401234567",
        "street": "Testikatu 1",
        "postalcode": "33100",
        "city": "Tampere",
        "country": "FI",
        "information": "T-paita: L",
        "time_created": datetime(2024, 1, 15, 10, 30, 0, tzinfo=UTC),
        "time_pending": datetime(2024, 1, 15, 10, 31, 0, tzinfo=UTC),
        "time_paid": datetime(2024, 1, 15, 10, 32, 0, tzinfo=UTC),
        "time_cancelled": None,
        "payment_method_name": "nordea",
    },
    {
        "transaction_id": "tx_2024_testuser2",
        "event_pk": 23,
        "user_username": "testuser2",
        "firstname": "Another",
        "lastname": "Tester",
        "company": "",
        "email": "testuser2@example.com",
        "telephone": "+358501234567",
        "mobile": "",
        "street": "Esimerkkitie 5 A 10",
        "postalcode": "00100",
        "city": "Helsinki",
        "country": "FI",
        "information": "T-paita: M",
        "time_created": datetime(2024, 1, 20, 14, 15, 0, tzinfo=UTC),
        "time_pending": datetime(2024, 1, 20, 14, 16, 0, tzinfo=UTC),
        "time_paid": datetime(2024, 1, 20, 14, 18, 0, tzinfo=UTC),
        "time_cancelled": None,
        "payment_method_name": "osuuspankki",
    },
    {
        "transaction_id": "tx_2024_voter1",
        "event_pk": 23,
        "user_username": "voter1",
        "firstname": "Voter",
        "lastname": "One",
        "company": "",
        "email": "voter1@example.com",
        "telephone": "",
        "mobile": "+358407654321",
        "street": "Äänestäjänkatu 3",
        "postalcode": "90100",
        "city": "Oulu",
        "country": "FI",
        "information": "",
        "time_created": datetime(2024, 2, 1, 9, 0, 0, tzinfo=UTC),
        "time_pending": datetime(2024, 2, 1, 9, 1, 0, tzinfo=UTC),
        "time_paid": datetime(2024, 2, 1, 9, 3, 0, tzinfo=UTC),
        "time_cancelled": None,
        "payment_method_name": "mobilepay",
    },
    {
        "transaction_id": "tx_2024_voter2",
        "event_pk": 23,
        "user_username": "voter2",
        "firstname": "Voter",
        "lastname": "Two",
        "company": "",
        "email": "voter2@example.com",
        "telephone": "",
        "mobile": "+358409876543",
        "street": "Kauppakatu 12",
        "postalcode": "20100",
        "city": "Turku",
        "country": "FI",
        "information": "",
        "time_created": datetime(2024, 2, 10, 16, 30, 0, tzinfo=UTC),
        "time_pending": datetime(2024, 2, 10, 16, 31, 0, tzinfo=UTC),
        "time_paid": datetime(2024, 2, 10, 16, 33, 0, tzinfo=UTC),
        "time_cancelled": None,
        "payment_method_name": "danske",
    },
    # Paid transactions for 2026 event (upcoming)
    {
        "transaction_id": "tx_2026_testuser1",
        "event_pk": 25,
        "user_username": "testuser1",
        "firstname": "Test",
        "lastname": "User",
        "company": "",
        "email": "testuser1@example.com",
        "telephone": "",
        "mobile": "+358401234567",
        "street": "Testikatu 1",
        "postalcode": "33100",
        "city": "Tampere",
        "country": "FI",
        "information": "",
        "time_created": datetime(2026, 1, 10, 12, 0, 0, tzinfo=UTC),
        "time_pending": datetime(2026, 1, 10, 12, 1, 0, tzinfo=UTC),
        "time_paid": datetime(2026, 1, 10, 12, 3, 0, tzinfo=UTC),
        "time_cancelled": None,
        "payment_method_name": "nordea",
    },
    {
        "transaction_id": "tx_2026_testuser2",
        "event_pk": 25,
        "user_username": "testuser2",
        "firstname": "Another",
        "lastname": "Tester",
        "company": "Test Oy",
        "email": "testuser2@example.com",
        "telephone": "+358501234567",
        "mobile": "",
        "street": "Esimerkkitie 5 A 10",
        "postalcode": "00100",
        "city": "Helsinki",
        "country": "FI",
        "information": "T-paidat: 2x L, 1x M",
        "time_created": datetime(2026, 1, 15, 15, 30, 0, tzinfo=UTC),
        "time_pending": datetime(2026, 1, 15, 15, 31, 0, tzinfo=UTC),
        "time_paid": datetime(2026, 1, 15, 15, 35, 0, tzinfo=UTC),
        "time_cancelled": None,
        "payment_method_name": "osuuspankki",
    },
    {
        "transaction_id": "tx_2026_voter1",
        "event_pk": 25,
        "user_username": "voter1",
        "firstname": "Voter",
        "lastname": "One",
        "company": "",
        "email": "voter1@example.com",
        "telephone": "",
        "mobile": "+358407654321",
        "street": "Äänestäjänkatu 3",
        "postalcode": "90100",
        "city": "Oulu",
        "country": "FI",
        "information": "Tarra: 5 kpl",
        "time_created": datetime(2026, 2, 1, 10, 0, 0, tzinfo=UTC),
        "time_pending": datetime(2026, 2, 1, 10, 1, 0, tzinfo=UTC),
        "time_paid": datetime(2026, 2, 1, 10, 2, 0, tzinfo=UTC),
        "time_cancelled": None,
        "payment_method_name": "mobilepay",
    },
    # Pending transaction (not yet paid)
    {
        "transaction_id": "tx_2026_pending",
        "event_pk": 25,
        "user_username": None,  # No user association for this one
        "firstname": "Pending",
        "lastname": "Customer",
        "company": "",
        "email": "pending@example.com",
        "telephone": "",
        "mobile": "+358401111111",
        "street": "Keskuskatu 1",
        "postalcode": "40100",
        "city": "Jyväskylä",
        "country": "FI",
        "information": "",
        "time_created": datetime(2026, 2, 5, 14, 0, 0, tzinfo=UTC),
        "time_pending": datetime(2026, 2, 5, 14, 1, 0, tzinfo=UTC),
        "time_paid": None,  # Not paid yet
        "time_cancelled": None,
        "payment_method_name": "",
    },
    # Cancelled transaction
    {
        "transaction_id": "tx_2026_cancelled",
        "event_pk": 25,
        "user_username": None,
        "firstname": "Cancelled",
        "lastname": "Order",
        "company": "",
        "email": "cancelled@example.com",
        "telephone": "",
        "mobile": "+358402222222",
        "street": "Peruutuskatu 99",
        "postalcode": "70100",
        "city": "Kuopio",
        "country": "FI",
        "information": "",
        "time_created": datetime(2026, 2, 3, 11, 0, 0, tzinfo=UTC),
        "time_pending": datetime(2026, 2, 3, 11, 1, 0, tzinfo=UTC),
        "time_paid": None,
        "time_cancelled": datetime(2026, 2, 3, 11, 10, 0, tzinfo=UTC),
        "payment_method_name": "",
    },
]

# Transaction items - what was bought in each transaction
# Note: key will be auto-generated in the command
transaction_items = [
    # testuser1's 2024 purchases
    {
        "transaction_id": "tx_2024_testuser1",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 - Viikonloppulippu",
        "variant_name": None,
        "quantity": 1,
        "original_price": Decimal("22.00"),
        "purchase_price": Decimal("22.00"),
        "time_delivered": datetime(2024, 2, 28, 10, 0, 0, tzinfo=UTC),
    },
    {
        "transaction_id": "tx_2024_testuser1",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 T-paita",
        "variant_name": "L",
        "quantity": 1,
        "original_price": Decimal("18.00"),
        "purchase_price": Decimal("18.00"),
        "time_delivered": datetime(2024, 2, 28, 10, 0, 0, tzinfo=UTC),
    },
    # testuser2's 2024 purchases
    {
        "transaction_id": "tx_2024_testuser2",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 - Viikonloppulippu",
        "variant_name": None,
        "quantity": 1,
        "original_price": Decimal("22.00"),
        "purchase_price": Decimal("22.00"),
        "time_delivered": datetime(2024, 2, 28, 11, 0, 0, tzinfo=UTC),
    },
    {
        "transaction_id": "tx_2024_testuser2",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 T-paita",
        "variant_name": "M",
        "quantity": 1,
        "original_price": Decimal("18.00"),
        "purchase_price": Decimal("18.00"),
        "time_delivered": datetime(2024, 2, 28, 11, 0, 0, tzinfo=UTC),
    },
    # voter1's 2024 purchases
    {
        "transaction_id": "tx_2024_voter1",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 - Viikonloppulippu",
        "variant_name": None,
        "quantity": 1,
        "original_price": Decimal("22.00"),
        "purchase_price": Decimal("22.00"),
        "time_delivered": datetime(2024, 2, 28, 9, 0, 0, tzinfo=UTC),
    },
    # voter2's 2024 purchases
    {
        "transaction_id": "tx_2024_voter2",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 - Viikonloppulippu",
        "variant_name": None,
        "quantity": 1,
        "original_price": Decimal("22.00"),
        "purchase_price": Decimal("22.00"),
        "time_delivered": datetime(2024, 2, 28, 9, 30, 0, tzinfo=UTC),
    },
    # testuser1's 2026 purchases (bulk discount applied)
    {
        "transaction_id": "tx_2026_testuser1",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Viikonloppulippu",
        "variant_name": None,
        "quantity": 5,  # Bulk purchase with 10% discount
        "original_price": Decimal("25.00"),
        "purchase_price": Decimal("22.50"),  # 10% discount applied
        "time_delivered": None,  # Not delivered yet
    },
    # testuser2's 2026 purchases
    {
        "transaction_id": "tx_2026_testuser2",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Viikonloppulippu",
        "variant_name": None,
        "quantity": 2,
        "original_price": Decimal("25.00"),
        "purchase_price": Decimal("25.00"),  # No discount (less than 5)
        "time_delivered": None,
    },
    {
        "transaction_id": "tx_2026_testuser2",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 T-paita",
        "variant_name": "L",
        "quantity": 2,
        "original_price": Decimal("20.00"),
        "purchase_price": Decimal("20.00"),
        "time_delivered": None,
    },
    {
        "transaction_id": "tx_2026_testuser2",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 T-paita",
        "variant_name": "M",
        "quantity": 1,
        "original_price": Decimal("20.00"),
        "purchase_price": Decimal("20.00"),
        "time_delivered": None,
    },
    # voter1's 2026 purchases
    {
        "transaction_id": "tx_2026_voter1",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Päivälippu lauantai",
        "variant_name": None,
        "quantity": 1,
        "original_price": Decimal("15.00"),
        "purchase_price": Decimal("15.00"),
        "time_delivered": None,
    },
    {
        "transaction_id": "tx_2026_voter1",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 Tarra",
        "variant_name": None,
        "quantity": 5,
        "original_price": Decimal("2.00"),
        "purchase_price": Decimal("2.00"),
        "time_delivered": None,
    },
    # Pending transaction items
    {
        "transaction_id": "tx_2026_pending",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Viikonloppulippu",
        "variant_name": None,
        "quantity": 1,
        "original_price": Decimal("25.00"),
        "purchase_price": Decimal("25.00"),
        "time_delivered": None,
    },
    # Cancelled transaction items
    {
        "transaction_id": "tx_2026_cancelled",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Viikonloppulippu",
        "variant_name": None,
        "quantity": 2,
        "original_price": Decimal("25.00"),
        "purchase_price": Decimal("25.00"),
        "time_delivered": None,
    },
]

# Ticket vote codes - link paid tickets to users for voting rights
# Only for paid transactions with ticket items
ticket_vote_codes = [
    # 2024 event tickets (all associated)
    {
        "transaction_id": "tx_2024_testuser1",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 - Viikonloppulippu",
        "item_index": 0,  # First ticket in the transaction
        "user_username": "testuser1",
        "time": datetime(2024, 2, 28, 10, 5, 0, tzinfo=UTC),
    },
    {
        "transaction_id": "tx_2024_testuser2",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 - Viikonloppulippu",
        "item_index": 0,
        "user_username": "testuser2",
        "time": datetime(2024, 2, 28, 11, 5, 0, tzinfo=UTC),
    },
    {
        "transaction_id": "tx_2024_voter1",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 - Viikonloppulippu",
        "item_index": 0,
        "user_username": "voter1",
        "time": datetime(2024, 2, 28, 9, 5, 0, tzinfo=UTC),
    },
    {
        "transaction_id": "tx_2024_voter2",
        "item_event_pk": 23,
        "item_name": "Instanssi 2024 - Viikonloppulippu",
        "item_index": 0,
        "user_username": "voter2",
        "time": datetime(2024, 2, 28, 9, 35, 0, tzinfo=UTC),
    },
    # 2026 event tickets
    # testuser1 bought 5 tickets - associate first one to self, leave rest unassociated
    {
        "transaction_id": "tx_2026_testuser1",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Viikonloppulippu",
        "item_index": 0,
        "user_username": "testuser1",
        "time": datetime(2026, 1, 10, 12, 10, 0, tzinfo=UTC),
    },
    # testuser2 bought 2 tickets - associate both
    {
        "transaction_id": "tx_2026_testuser2",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Viikonloppulippu",
        "item_index": 0,
        "user_username": "testuser2",
        "time": datetime(2026, 1, 15, 15, 40, 0, tzinfo=UTC),
    },
    {
        "transaction_id": "tx_2026_testuser2",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Viikonloppulippu",
        "item_index": 1,
        "user_username": "admin",  # Gave second ticket to admin
        "time": datetime(2026, 1, 16, 10, 0, 0, tzinfo=UTC),
    },
    # voter1 bought a day ticket
    {
        "transaction_id": "tx_2026_voter1",
        "item_event_pk": 25,
        "item_name": "Instanssi 2026 - Päivälippu lauantai",
        "item_index": 0,
        "user_username": "voter1",
        "time": datetime(2026, 2, 1, 10, 5, 0, tzinfo=UTC),
    },
]
