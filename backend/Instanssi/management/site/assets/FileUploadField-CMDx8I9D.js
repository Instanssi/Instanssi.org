import{d as H,a as J,a1 as Q,aC as Y,b as d,c as x,e as l,h as Z,w as t,aq as R,l as U,j as a,ap as $,g as C,V as p,k as c,av as ee,aw as le,ax as ae,aD as te,p as I,ar as h,f as j,t as V,as as _,at as N,B as P,au as S,K as B,F as ie,s as m,G as k,_ as ne}from"./index-BSHMv_df.js";import{V as oe,g as O}from"./formdata-C-bOWTdV.js";const ue=["title"],re=["src"],se=["src"],de=H({__name:"FileUploadField",props:{modelValue:{},currentFileUrl:{default:null},label:{},errorMessage:{default:void 0},accept:{default:void 0},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(y,{emit:D}){const z=["jpg","jpeg","png","gif","webp","svg","bmp","ico"],A=["mp4","mkv","webm","avi","mov","wmv","flv","ogv"],M=["mp3","ogg","opus","aac","wav","flac","m4a","wma"];function T(n,e){if(e){if(e.startsWith("image/"))return"image";if(e.startsWith("video/"))return"video";if(e.startsWith("audio/"))return"audio"}if(n){const i=n.split(".").pop()?.toLowerCase();if(i){if(z.includes(i))return"image";if(A.includes(i))return"video";if(M.includes(i))return"audio"}}return"other"}function E(n){if(!n)return null;try{return new URL(n).pathname.split("/").pop()||null}catch{return n.split("/").pop()?.split("?")[0]||null}}const o=y,L=D,{t:u}=J(),X=m(),v=m(!1),w=m(!1),F=m(!1),r=m(null),f=m(!1),q=k(()=>o.required?`${o.label} *`:o.label),g=k(()=>O(o.modelValue)),K=k(()=>{if(g.value)return g.value;if(f.value)return null;if(o.currentFileUrl){const n=E(o.currentFileUrl);if(n)return new File([],n)}return null}),b=k(()=>{if(g.value)return T(g.value.name,g.value.type);if(!f.value&&o.currentFileUrl){const n=E(o.currentFileUrl);return T(n,null)}return"other"});Q(()=>o.modelValue,n=>{r.value&&(URL.revokeObjectURL(r.value),r.value=null);const e=O(n);e&&(r.value=URL.createObjectURL(e),f.value=!1)},{immediate:!0}),Y(()=>{r.value&&URL.revokeObjectURL(r.value)});const s=k(()=>r.value?r.value:f.value?null:o.currentFileUrl??null);function W(n){f.value=!1,L("update:modelValue",n)}function G(){f.value=!0,L("update:modelValue",null)}return(n,e)=>(d(),x(ie,null,[l(oe,{ref_key:"fileInputRef",ref:X,"model-value":K.value,label:q.value,"error-messages":y.errorMessage,accept:y.accept,variant:"outlined","prepend-icon":"",clearable:"","onUpdate:modelValue":W,"onClick:clear":G},Z({"prepend-inner":t(()=>[l(a(c),{icon:a(te),class:"mr-2"},null,8,["icon"])]),_:2},[s.value?{name:"append-inner",fn:t(()=>[b.value==="image"?(d(),x("div",{key:0,class:"file-preview",role:"button",tabindex:"0",title:a(u)("FileUploadField.clickToPreview"),onClick:e[0]||(e[0]=U(i=>v.value=!0,["stop"])),onKeydown:[e[1]||(e[1]=R(i=>v.value=!0,["enter"])),e[2]||(e[2]=R(U(i=>v.value=!0,["prevent"]),["space"]))]},[l($,{src:s.value,width:"32",height:"32",cover:"",class:"rounded"},null,8,["src"])],40,ue)):b.value==="video"?(d(),C(p,{key:1,icon:"",variant:"text",size:"x-small",title:a(u)("FileUploadField.clickToPreview"),onClick:e[3]||(e[3]=U(i=>w.value=!0,["stop"]))},{default:t(()=>[l(a(c),{icon:a(ee),size:"lg"},null,8,["icon"])]),_:1},8,["title"])):b.value==="audio"?(d(),C(p,{key:2,icon:"",variant:"text",size:"x-small",title:a(u)("FileUploadField.clickToPreview"),onClick:e[4]||(e[4]=U(i=>F.value=!0,["stop"]))},{default:t(()=>[l(a(c),{icon:a(le),size:"lg"},null,8,["icon"])]),_:1},8,["title"])):(d(),C(p,{key:3,icon:"",variant:"text",size:"x-small",href:s.value,target:"_blank",title:a(u)("FileUploadField.download"),onClick:e[5]||(e[5]=U(()=>{},["stop"]))},{default:t(()=>[l(a(c),{icon:a(ae),size:"lg"},null,8,["icon"])]),_:1},8,["href","title"]))]),key:"0"}:void 0]),1032,["model-value","label","error-messages","accept"]),l(S,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=i=>v.value=i),"max-width":"900"},{default:t(()=>[l(I,null,{default:t(()=>[l(h,{class:"d-flex justify-space-between align-center"},{default:t(()=>[j("span",null,V(a(u)("FileUploadField.imagePreviewTitle")),1),l(p,{icon:"",variant:"text",density:"compact",onClick:e[6]||(e[6]=i=>v.value=!1)},{default:t(()=>[l(a(c),{icon:a(_)},null,8,["icon"])]),_:1})]),_:1}),l(N),l(P,{class:"d-flex justify-center pa-4"},{default:t(()=>[l($,{src:s.value??void 0,"max-height":"70vh","max-width":"100%"},null,8,["src"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(S,{modelValue:w.value,"onUpdate:modelValue":e[9]||(e[9]=i=>w.value=i),"max-width":"900"},{default:t(()=>[l(I,null,{default:t(()=>[l(h,{class:"d-flex justify-space-between align-center"},{default:t(()=>[j("span",null,V(a(u)("FileUploadField.videoPreviewTitle")),1),l(p,{icon:"",variant:"text",density:"compact",onClick:e[8]||(e[8]=i=>w.value=!1)},{default:t(()=>[l(a(c),{icon:a(_)},null,8,["icon"])]),_:1})]),_:1}),l(N),l(P,{class:"d-flex justify-center pa-4"},{default:t(()=>[w.value&&s.value?(d(),x("video",{key:0,src:s.value,controls:"",autoplay:"",class:"video-player"},V(a(u)("FileUploadField.videoNotSupported")),9,re)):B("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(S,{modelValue:F.value,"onUpdate:modelValue":e[11]||(e[11]=i=>F.value=i),"max-width":"500"},{default:t(()=>[l(I,null,{default:t(()=>[l(h,{class:"d-flex justify-space-between align-center"},{default:t(()=>[j("span",null,V(a(u)("FileUploadField.audioPreviewTitle")),1),l(p,{icon:"",variant:"text",density:"compact",onClick:e[10]||(e[10]=i=>F.value=!1)},{default:t(()=>[l(a(c),{icon:a(_)},null,8,["icon"])]),_:1})]),_:1}),l(N),l(P,{class:"d-flex justify-center pa-4"},{default:t(()=>[F.value&&s.value?(d(),x("audio",{key:0,src:s.value,controls:"",autoplay:"",class:"audio-player"},V(a(u)("FileUploadField.audioNotSupported")),9,se)):B("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),fe=ne(de,[["__scopeId","data-v-ca2bbe6c"]]);export{fe as F};
//# sourceMappingURL=FileUploadField-CMDx8I9D.js.map
