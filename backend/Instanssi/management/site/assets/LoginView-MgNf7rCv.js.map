{"version":3,"file":"LoginView-MgNf7rCv.js","sources":["../../../../../admin/src/views/LoginView.vue"],"sourcesContent":["<template>\n    <div class=\"d-flex align-center justify-center fill-height\">\n        <v-card color=\"grey-darken-4\" class=\"opacity-95\" :title=\"t('LoginView.title')\">\n            <template #subtitle>\n                {{ t(\"LoginView.subtitle\") }}\n            </template>\n            <template #text>\n                <div class=\"d-flex justify-center\">\n                    <v-btn\n                        v-for=\"method in socialLoginUrls\"\n                        :key=\"method.method\"\n                        variant=\"plain\"\n                        :prepend-icon=\"`fab fa-${method.method}`\"\n                        :href=\"method.url\"\n                    >\n                        {{ method.name }}\n                    </v-btn>\n                </div>\n                <v-form class=\"mt-4\" @submit.prevent=\"submit\">\n                    <v-container class=\"ma-0 pa-0\">\n                        <v-row dense no-gutters class=\"mb-2 mt-2\">\n                            <v-text-field\n                                v-model=\"username.value.value\"\n                                :error-messages=\"username.errorMessage.value\"\n                                density=\"compact\"\n                                variant=\"outlined\"\n                                :label=\"t('LoginView.username')\"\n                            />\n                        </v-row>\n                        <v-row dense no-gutters class=\"mb-2 mt-2\">\n                            <v-text-field\n                                v-model=\"password.value.value\"\n                                :error-messages=\"password.errorMessage.value\"\n                                type=\"password\"\n                                density=\"compact\"\n                                variant=\"outlined\"\n                                :label=\"t('LoginView.password')\"\n                            />\n                        </v-row>\n                        <v-row dense no-gutters class=\"justify-end\">\n                            <v-btn\n                                type=\"submit\"\n                                color=\"primary\"\n                                variant=\"elevated\"\n                                prepend-icon=\"fas fa-right-to-bracket\"\n                            >\n                                {{ t(\"LoginView.login\") }}\n                            </v-btn>\n                        </v-row>\n                    </v-container>\n                </v-form>\n            </template>\n        </v-card>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useField, useForm } from \"vee-validate\";\nimport { type Ref, onMounted, ref } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport { useRouter } from \"vue-router\";\nimport { object as yupObject, string as yupString } from \"yup\";\n\nimport type { SocialAuthUrl } from \"@/api\";\nimport { useAuth } from \"@/services/auth\";\n\nconst authService = useAuth();\nconst router = useRouter();\nconst { t } = useI18n();\n\nconst socialLoginUrls: Ref<SocialAuthUrl[]> = ref([]);\n\n// Field validation rules\nconst validationSchema = yupObject({\n    username: yupString().required().min(1),\n    password: yupString().required().min(1),\n});\nconst { handleSubmit, setErrors } = useForm({ validationSchema });\nconst username = useField(\"username\");\nconst password = useField(\"password\");\n\nconst submit = handleSubmit(async (values) => {\n    const loginOk = await authService.login(values.username, values.password);\n    if (loginOk) {\n        await router.push({ name: \"index\" });\n    } else {\n        setErrors({\n            username: \"Incorrect username or password!\",\n            password: \"Incorrect username or password!\",\n        });\n    }\n});\n\nonMounted(async () => {\n    socialLoginUrls.value = await authService.getSocialAuthURLs();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.opacity-95 {\n    opacity: 0.95;\n}\n</style>\n"],"names":["authService","useAuth","router","useRouter","t","useI18n","socialLoginUrls","ref","validationSchema","yupObject","yupString","handleSubmit","setErrors","useForm","username","useField","password","submit","values","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_v_card","_unref","_createElementVNode","_hoisted_2","_Fragment","_renderList","method","_createBlock","_component_v_btn","_createTextVNode","_toDisplayString","_component_v_form","_component_v_container","_component_v_row","_component_v_text_field","$event"],"mappings":"gbAkEA,MAAMA,EAAcC,EAAA,EACdC,EAASC,EAAA,EACT,CAAE,EAAAC,CAAA,EAAMC,EAAA,EAERC,EAAwCC,EAAI,EAAE,EAG9CC,EAAmBC,EAAU,CAC/B,SAAUC,EAAA,EAAY,SAAA,EAAW,IAAI,CAAC,EACtC,SAAUA,EAAA,EAAY,SAAA,EAAW,IAAI,CAAC,CAAA,CACzC,EACK,CAAE,aAAAC,EAAc,UAAAC,CAAA,EAAcC,EAAQ,CAAE,iBAAAL,EAAkB,EAC1DM,EAAWC,EAAS,UAAU,EAC9BC,EAAWD,EAAS,UAAU,EAE9BE,EAASN,EAAa,MAAOO,GAAW,CAC1B,MAAMlB,EAAY,MAAMkB,EAAO,SAAUA,EAAO,QAAQ,EAEpE,MAAMhB,EAAO,KAAK,CAAE,KAAM,QAAS,EAEnCU,EAAU,CACN,SAAU,kCACV,SAAU,iCAAA,CACb,CAET,CAAC,EAED,OAAAO,EAAU,SAAY,CAClBb,EAAgB,MAAQ,MAAMN,EAAY,kBAAA,CAC9C,CAAC,UA9FGoB,EAAA,EAAAC,EAoDM,MApDNC,EAoDM,CAnDFC,EAkDSC,EAAA,CAlDD,MAAM,gBAAgB,MAAM,aAAc,MAAOC,EAAArB,CAAA,EAAC,iBAAA,CAAA,GAC3C,WACP,IAA6B,KAA1BqB,EAAArB,CAAA,EAAC,oBAAA,CAAA,EAAA,CAAA,CAAA,GAEG,OACP,IAUM,CAVNsB,EAUM,MAVNC,EAUM,QATFN,EAQQO,EAAA,KAAAC,EAPavB,EAAA,MAAVwB,QADXC,EAQQC,EAAA,CANH,IAAKF,EAAO,OACb,QAAQ,QACP,eAAY,UAAYA,EAAO,MAAM,GACrC,KAAMA,EAAO,GAAA,aAEd,IAAiB,CAAdG,EAAAC,EAAAJ,EAAO,IAAI,EAAA,CAAA,CAAA,gDAGtBP,EAgCSY,EAAA,CAhCD,MAAM,OAAQ,WAAgBV,EAAAR,CAAA,EAAM,CAAA,SAAA,CAAA,CAAA,aACxC,IA8Bc,CA9BdM,EA8Bca,EAAA,CA9BD,MAAM,aAAW,WAC1B,IAQQ,CARRb,EAQQc,EAAA,CARD,MAAA,GAAM,aAAA,GAAW,MAAM,WAAA,aAC1B,IAME,CANFd,EAMEe,EAAA,YALWb,EAAAX,CAAA,EAAS,MAAM,2CAAfW,EAAAX,CAAA,EAAS,MAAM,MAAKyB,GAC5B,iBAAgBd,EAAAX,CAAA,EAAS,aAAa,MACvC,QAAQ,UACR,QAAQ,WACP,MAAOW,EAAArB,CAAA,EAAC,oBAAA,CAAA,0DAGjBmB,EASQc,EAAA,CATD,MAAA,GAAM,aAAA,GAAW,MAAM,WAAA,aAC1B,IAOE,CAPFd,EAOEe,EAAA,YANWb,EAAAT,CAAA,EAAS,MAAM,2CAAfS,EAAAT,CAAA,EAAS,MAAM,MAAKuB,GAC5B,iBAAgBd,EAAAT,CAAA,EAAS,aAAa,MACvC,KAAK,WACL,QAAQ,UACR,QAAQ,WACP,MAAOS,EAAArB,CAAA,EAAC,oBAAA,CAAA,0DAGjBmB,EASQc,EAAA,CATD,MAAA,GAAM,aAAA,GAAW,MAAM,aAAA,aAC1B,IAOQ,CAPRd,EAOQS,EAAA,CANJ,KAAK,SACL,MAAM,UACN,QAAQ,WACR,eAAa,yBAAA,aAEb,IAA0B,KAAvBP,EAAArB,CAAA,EAAC,iBAAA,CAAA,EAAA,CAAA,CAAA"}