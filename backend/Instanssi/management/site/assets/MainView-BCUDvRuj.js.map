{"version":3,"file":"MainView-BCUDvRuj.js","sources":["../../../../../admin/src/components/dashboard/charts/CompetitionParticipantsChart.vue","../../../../../admin/src/components/dashboard/charts/EntriesPerCompoChart.vue","../../../../../admin/src/components/dashboard/EventCountdown.vue","../../../../../admin/src/views/events/MainView.vue"],"sourcesContent":["<template>\n    <ChartCard\n        :title=\"t('MainView.charts.competitionParticipants')\"\n        :icon=\"faChartBar\"\n        :has-data=\"chartData.labels.length > 0\"\n        :no-data-text=\"t('MainView.charts.noData')\"\n    >\n        <Bar :data=\"chartData\" :options=\"chartOptions\" />\n    </ChartCard>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n    BarElement,\n    CategoryScale,\n    Chart as ChartJS,\n    Legend,\n    LinearScale,\n    Tooltip,\n} from \"chart.js\";\nimport { faChartBar } from \"@fortawesome/free-solid-svg-icons\";\nimport { computed } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport { Bar } from \"vue-chartjs\";\n\nimport ChartCard from \"@/components/dashboard/ChartCard.vue\";\n\nChartJS.register(BarElement, CategoryScale, Legend, LinearScale, Tooltip);\n\nconst props = defineProps<{\n    competitions: Array<{ id: number; name: string }>;\n    participantCounts: Map<number, number>;\n}>();\n\nconst { t } = useI18n();\n\nconst chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n        legend: {\n            display: false,\n        },\n    },\n    scales: {\n        y: {\n            beginAtZero: true,\n            ticks: {\n                stepSize: 1,\n            },\n        },\n    },\n};\n\nconst chartData = computed(() => ({\n    labels: props.competitions.map((c) => c.name),\n    datasets: [\n        {\n            label: t(\"MainView.stats.participants\"),\n            data: props.competitions.map((c) => props.participantCounts.get(c.id) ?? 0),\n            backgroundColor: \"#2196F3\",\n        },\n    ],\n}));\n</script>\n","<template>\n    <ChartCard\n        :title=\"t('MainView.charts.entriesPerCompo')\"\n        :icon=\"faChartPie\"\n        :has-data=\"chartData.labels.length > 0\"\n        :no-data-text=\"t('MainView.charts.noData')\"\n    >\n        <Pie :data=\"chartData\" :options=\"chartOptions\" />\n    </ChartCard>\n</template>\n\n<script setup lang=\"ts\">\nimport { ArcElement, Chart as ChartJS, Legend, Tooltip } from \"chart.js\";\nimport { faChartPie } from \"@fortawesome/free-solid-svg-icons\";\nimport { computed } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport { Pie } from \"vue-chartjs\";\n\nimport ChartCard from \"@/components/dashboard/ChartCard.vue\";\n\nChartJS.register(ArcElement, Legend, Tooltip);\n\nconst props = defineProps<{\n    compos: Array<{ id: number; name: string }>;\n    entryCounts: Map<number, number>;\n}>();\n\nconst { t } = useI18n();\n\nconst chartColors = [\n    \"#4CAF50\",\n    \"#2196F3\",\n    \"#FF9800\",\n    \"#9C27B0\",\n    \"#E91E63\",\n    \"#00BCD4\",\n    \"#FFEB3B\",\n    \"#795548\",\n    \"#607D8B\",\n    \"#F44336\",\n];\n\nconst chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n        legend: {\n            position: \"right\" as const,\n        },\n    },\n};\n\nconst chartData = computed(() => ({\n    labels: props.compos.map((c) => c.name),\n    datasets: [\n        {\n            data: props.compos.map((c) => props.entryCounts.get(c.id) ?? 0),\n            backgroundColor: chartColors.slice(0, props.compos.length),\n        },\n    ],\n}));\n</script>\n","<template>\n    <v-chip :color=\"chipColor\" size=\"small\">\n        {{ displayText }}\n    </v-chip>\n</template>\n\n<script setup lang=\"ts\">\nimport { Temporal } from \"temporal-polyfill\";\nimport { computed } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\n\nimport { ADMIN_TIMEZONE } from \"@/utils/datetime\";\n\nconst props = defineProps<{\n    /** Event date in YYYY-MM-DD format */\n    date: string;\n}>();\n\nconst { t } = useI18n();\n\nconst daysUntil = computed(() => {\n    const eventDate = Temporal.PlainDate.from(props.date);\n    const today = Temporal.Now.zonedDateTimeISO(ADMIN_TIMEZONE).toPlainDate();\n    return eventDate.since(today).days;\n});\n\nconst displayText = computed(() => {\n    const days = daysUntil.value;\n    if (days > 0) {\n        return t(\"MainView.daysUntil\", { days });\n    } else if (days === 0) {\n        return t(\"MainView.today\");\n    } else {\n        return t(\"MainView.daysAgo\", { days: Math.abs(days) });\n    }\n});\n\nconst chipColor = computed(() => {\n    const days = daysUntil.value;\n    if (days > 7) return \"green\";\n    if (days > 0) return \"orange\";\n    if (days === 0) return \"red\";\n    return \"grey\";\n});\n</script>\n","<template>\n    <LayoutBase :key=\"`dashboard-${eventId}`\" :breadcrumbs=\"breadcrumbs\">\n        <!-- Event Overview -->\n        <v-row>\n            <v-col cols=\"12\">\n                <v-card>\n                    <v-card-title class=\"d-flex align-center\">\n                        <FontAwesomeIcon :icon=\"faCalendarDays\" class=\"mr-2\" />\n                        {{ event?.name ?? t(\"MainView.noEvent\") }}\n                        <v-chip v-if=\"event?.archived\" class=\"ml-2\" color=\"grey\" size=\"small\">\n                            {{ t(\"MainView.archived\") }}\n                        </v-chip>\n                    </v-card-title>\n                    <v-card-text>\n                        <div>\n                            <span class=\"text-grey\">{{ t(\"MainView.eventDate\") }}:</span>\n                            {{ event ? d(event.date, \"short\") : \"-\" }}\n                        </div>\n                        <div v-if=\"event\" class=\"mt-2\">\n                            <span class=\"text-grey\">{{ t(\"MainView.countdown\") }}:</span>\n                            <EventCountdown :date=\"event.date\" class=\"ml-1\" />\n                        </div>\n                    </v-card-text>\n                </v-card>\n            </v-col>\n        </v-row>\n\n        <!-- Statistics Cards -->\n        <v-row class=\"mt-2\">\n            <v-col v-if=\"auth.canView(PermissionTarget.BLOG_ENTRY)\" cols=\"12\" sm=\"6\" lg>\n                <StatCard\n                    :icon=\"faNewspaper\"\n                    :value=\"stats.blogPosts.total\"\n                    :label=\"t('MainView.stats.blogPosts')\"\n                    :subtitle=\"`${stats.blogPosts.public} ${t('MainView.stats.public')} / ${stats.blogPosts.draft} ${t('MainView.stats.draft')}`\"\n                    color=\"blue\"\n                    clickable\n                    @click=\"router.push({ name: 'blog', params: { eventId } })\"\n                />\n            </v-col>\n            <v-col v-if=\"auth.canView(PermissionTarget.ENTRY)\" cols=\"12\" sm=\"6\" lg>\n                <StatCard\n                    :icon=\"faFilm\"\n                    :value=\"stats.compoEntries\"\n                    :label=\"t('MainView.stats.compoEntries')\"\n                    :subtitle=\"`${stats.compos} ${t('MainView.stats.compos')}`\"\n                    color=\"green\"\n                    clickable\n                    @click=\"router.push({ name: 'entries', params: { eventId } })\"\n                />\n            </v-col>\n            <v-col\n                v-if=\"auth.canView(PermissionTarget.COMPETITION_PARTICIPATION)\"\n                cols=\"12\"\n                sm=\"6\"\n                lg\n            >\n                <StatCard\n                    :icon=\"faMedal\"\n                    :value=\"stats.competitionParticipants\"\n                    :label=\"t('MainView.stats.competitionParticipants')\"\n                    :subtitle=\"`${stats.competitions} ${t('MainView.stats.competitions')}`\"\n                    color=\"orange-darken-3\"\n                    clickable\n                    @click=\"\n                        router.push({ name: 'competition-participations', params: { eventId } })\n                    \"\n                />\n            </v-col>\n            <v-col v-if=\"auth.canView(PermissionTarget.STORE_TRANSACTION)\" cols=\"12\" sm=\"6\" lg>\n                <StatCard\n                    :icon=\"faCreditCard\"\n                    :value=\"stats.transactions.total\"\n                    :label=\"t('MainView.stats.transactions')\"\n                    :subtitle=\"`${stats.transactions.paid} ${t('MainView.stats.paid')}`\"\n                    color=\"teal\"\n                    clickable\n                    @click=\"router.push({ name: 'store-transactions', params: { eventId } })\"\n                />\n            </v-col>\n            <v-col v-if=\"auth.canView(PermissionTarget.VOTE_CODE_REQUEST)\" cols=\"12\" sm=\"6\" lg>\n                <StatCard\n                    :icon=\"faCheckToSlot\"\n                    :value=\"stats.voteCodeRequests.pending\"\n                    :label=\"t('MainView.stats.pendingVoteRequests')\"\n                    :subtitle=\"`${stats.voteCodeRequests.total} ${t('MainView.stats.totalRequests')}`\"\n                    color=\"pink\"\n                    clickable\n                    @click=\"router.push({ name: 'vote-code-requests', params: { eventId } })\"\n                />\n            </v-col>\n        </v-row>\n\n        <!-- Charts -->\n        <v-row class=\"mt-2\">\n            <v-col v-if=\"auth.canView(PermissionTarget.COMPO)\" cols=\"12\" md=\"6\">\n                <EntriesPerCompoChart :compos=\"compos\" :entry-counts=\"compoEntryCounts\" />\n            </v-col>\n            <v-col v-if=\"auth.canView(PermissionTarget.COMPETITION)\" cols=\"12\" md=\"6\">\n                <CompetitionParticipantsChart\n                    :competitions=\"competitions\"\n                    :participant-counts=\"competitionParticipantCounts\"\n                />\n            </v-col>\n        </v-row>\n\n        <!-- Recent Activity -->\n        <v-row class=\"mt-2 mb-1\">\n            <v-col v-if=\"auth.canView(PermissionTarget.BLOG_ENTRY)\" cols=\"12\" md=\"6\">\n                <v-card>\n                    <v-card-title>\n                        <FontAwesomeIcon :icon=\"faClockRotateLeft\" class=\"mr-2\" />\n                        {{ t(\"MainView.recentActivity.blogPosts\") }}\n                    </v-card-title>\n                    <v-card-text>\n                        <v-list v-if=\"recentBlogPosts.length > 0\" density=\"compact\">\n                            <v-list-item\n                                v-for=\"post in recentBlogPosts\"\n                                :key=\"post.id\"\n                                :title=\"post.title\"\n                                :subtitle=\"d(post.date, 'long')\"\n                            >\n                                <template #prepend>\n                                    <FontAwesomeIcon\n                                        :icon=\"post.public ? faEye : faEyeSlash\"\n                                        :class=\"post.public ? 'text-green mr-3' : 'text-grey mr-3'\"\n                                        size=\"sm\"\n                                    />\n                                </template>\n                            </v-list-item>\n                        </v-list>\n                        <div v-else class=\"text-center text-grey py-4\">\n                            {{ t(\"MainView.recentActivity.noRecentPosts\") }}\n                        </div>\n                    </v-card-text>\n                </v-card>\n            </v-col>\n            <v-col v-if=\"auth.canView(PermissionTarget.ENTRY)\" cols=\"12\" md=\"6\">\n                <v-card>\n                    <v-card-title>\n                        <FontAwesomeIcon :icon=\"faFileImport\" class=\"mr-2\" />\n                        {{ t(\"MainView.recentActivity.compoEntries\") }}\n                    </v-card-title>\n                    <v-card-text>\n                        <v-list v-if=\"recentCompoEntries.length > 0\" density=\"compact\">\n                            <v-list-item\n                                v-for=\"entry in recentCompoEntries\"\n                                :key=\"entry.id\"\n                                :title=\"entry.name\"\n                                :subtitle=\"getCompoName(entry.compo)\"\n                            >\n                                <template #prepend>\n                                    <FontAwesomeIcon :icon=\"faFile\" size=\"sm\" class=\"mr-3\" />\n                                </template>\n                            </v-list-item>\n                        </v-list>\n                        <div v-else class=\"text-center text-grey py-4\">\n                            {{ t(\"MainView.recentActivity.noRecentEntries\") }}\n                        </div>\n                    </v-card-text>\n                </v-card>\n            </v-col>\n        </v-row>\n\n        <RefreshControl @refresh=\"loadDashboardData\" />\n    </LayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { parseInt } from \"lodash-es\";\nimport { computed, ref, watch } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport {\n    faCalendarDays,\n    faCheckToSlot,\n    faClockRotateLeft,\n    faCreditCard,\n    faEye,\n    faEyeSlash,\n    faFile,\n    faFileImport,\n    faFilm,\n    faMedal,\n    faNewspaper,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { useRouter } from \"vue-router\";\n\nimport * as api from \"@/api\";\nimport type { BlogEntry, Compo, CompoEntry, Competition, Event } from \"@/api\";\nimport CompetitionParticipantsChart from \"@/components/dashboard/charts/CompetitionParticipantsChart.vue\";\nimport EntriesPerCompoChart from \"@/components/dashboard/charts/EntriesPerCompoChart.vue\";\nimport EventCountdown from \"@/components/dashboard/EventCountdown.vue\";\nimport RefreshControl from \"@/components/dashboard/RefreshControl.vue\";\nimport LayoutBase, { type BreadcrumbItem } from \"@/components/layout/LayoutBase.vue\";\nimport StatCard from \"@/components/dashboard/StatCard.vue\";\nimport { PermissionTarget, useAuth } from \"@/services/auth\";\n\nconst router = useRouter();\n\nconst props = defineProps<{ eventId: string }>();\nconst { t, d } = useI18n();\nconst auth = useAuth();\n\nconst event = ref<Event | null>(null);\nconst eventIdNum = computed(() => parseInt(props.eventId, 10));\n\nconst breadcrumbs = computed<BreadcrumbItem[]>(() => [\n    {\n        title: event.value?.name ?? \"...\",\n        to: { name: \"dashboard\", params: { eventId: props.eventId } },\n    },\n    { title: t(\"MainView.title\"), disabled: true },\n]);\n\n// Statistics\nconst stats = ref({\n    blogPosts: { total: 0, public: 0, draft: 0 },\n    compoEntries: 0,\n    compos: 0,\n    competitionParticipants: 0,\n    competitions: 0,\n    transactions: { total: 0, paid: 0 },\n    voteCodeRequests: { total: 0, pending: 0 },\n});\n\n// Recent activity\nconst recentBlogPosts = ref<BlogEntry[]>([]);\nconst recentCompoEntries = ref<CompoEntry[]>([]);\n// Chart data\nconst compos = ref<Compo[]>([]);\nconst competitions = ref<Competition[]>([]);\nconst compoEntryCounts = ref<Map<number, number>>(new Map());\nconst competitionParticipantCounts = ref<Map<number, number>>(new Map());\n\nfunction getCompoName(compoId: number): string {\n    return compos.value.find((c) => c.id === compoId)?.name ?? t(\"MainView.unknown\");\n}\n\nasync function loadEvent(eid: number) {\n    try {\n        const response = await api.adminEventsRetrieve({ path: { id: eid } });\n        event.value = response.data ?? null;\n    } catch (e) {\n        console.error(\"Failed to load event:\", e);\n    }\n}\n\nasync function loadBlogPosts(eid: number) {\n    if (!auth.canView(PermissionTarget.BLOG_ENTRY)) return;\n    try {\n        const response = await api.adminBlogList({ query: { event: eid, limit: 1000 } });\n        const blogPosts = response.data?.results ?? [];\n        const publicPosts = blogPosts.filter((p) => p.public).length;\n        stats.value.blogPosts = {\n            total: blogPosts.length,\n            public: publicPosts,\n            draft: blogPosts.length - publicPosts,\n        };\n        recentBlogPosts.value = blogPosts.slice(0, 5);\n    } catch (e) {\n        console.error(\"Failed to load blog posts:\", e);\n    }\n}\n\nasync function loadComposAndEntries(eid: number) {\n    if (!auth.canView(PermissionTarget.COMPO) && !auth.canView(PermissionTarget.ENTRY)) return;\n    try {\n        const [compoResponse, entriesResponse] = await Promise.all([\n            api.adminEventKompomaattiComposList({\n                path: { event_pk: eid },\n                query: { limit: 1000 },\n            }),\n            api.adminEventKompomaattiEntriesList({\n                path: { event_pk: eid },\n                query: { limit: 1000 },\n            }),\n        ]);\n\n        const compoList = compoResponse.data?.results ?? [];\n        const entries = entriesResponse.data?.results ?? [];\n        compos.value = compoList;\n        stats.value.compos = compoList.length;\n        stats.value.compoEntries = entries.length;\n        recentCompoEntries.value = entries.slice(0, 5);\n\n        const entryCounts = new Map<number, number>();\n        for (const entry of entries) {\n            entryCounts.set(entry.compo, (entryCounts.get(entry.compo) ?? 0) + 1);\n        }\n        compoEntryCounts.value = entryCounts;\n    } catch (e) {\n        console.error(\"Failed to load compos/entries:\", e);\n    }\n}\n\nasync function loadCompetitionsAndParticipants(eid: number) {\n    if (\n        !auth.canView(PermissionTarget.COMPETITION) &&\n        !auth.canView(PermissionTarget.COMPETITION_PARTICIPATION)\n    ) {\n        return;\n    }\n    try {\n        const [competitionsResponse, participantsResponse] = await Promise.all([\n            api.adminEventKompomaattiCompetitionsList({\n                path: { event_pk: eid },\n                query: { limit: 1000 },\n            }),\n            api.adminEventKompomaattiCompetitionParticipationsList({\n                path: { event_pk: eid },\n                query: { limit: 1000 },\n            }),\n        ]);\n\n        const competitionList = competitionsResponse.data?.results ?? [];\n        const participants = participantsResponse.data?.results ?? [];\n        competitions.value = competitionList;\n        stats.value.competitions = competitionList.length;\n        stats.value.competitionParticipants = participants.length;\n\n        const participantCounts = new Map<number, number>();\n        for (const p of participants) {\n            participantCounts.set(p.competition, (participantCounts.get(p.competition) ?? 0) + 1);\n        }\n        competitionParticipantCounts.value = participantCounts;\n    } catch (e) {\n        console.error(\"Failed to load competitions/participants:\", e);\n    }\n}\n\nasync function loadTransactions(eid: number) {\n    if (!auth.canView(PermissionTarget.STORE_TRANSACTION)) return;\n    try {\n        const response = await api.adminEventStoreTransactionsList({\n            path: { event_pk: eid },\n            query: { limit: 1000 },\n        });\n        const transactions = response.data?.results ?? [];\n        const paidTransactions = transactions.filter((tx) => tx.time_paid).length;\n        stats.value.transactions = {\n            total: transactions.length,\n            paid: paidTransactions,\n        };\n    } catch (e) {\n        console.error(\"Failed to load transactions:\", e);\n    }\n}\n\nasync function loadVoteCodeRequests(eid: number) {\n    if (!auth.canView(PermissionTarget.VOTE_CODE_REQUEST)) return;\n    try {\n        const response = await api.adminEventKompomaattiVoteCodeRequestsList({\n            path: { event_pk: eid },\n            query: { limit: 1000 },\n        });\n        const voteRequests = response.data?.results ?? [];\n        const pendingRequests = voteRequests.filter((r) => r.status === 0).length;\n        stats.value.voteCodeRequests = {\n            total: voteRequests.length,\n            pending: pendingRequests,\n        };\n    } catch (e) {\n        console.error(\"Failed to load vote code requests:\", e);\n    }\n}\n\nasync function loadDashboardData() {\n    const eid = eventIdNum.value;\n    await loadEvent(eid);\n    await Promise.all([\n        loadBlogPosts(eid),\n        loadComposAndEntries(eid),\n        loadCompetitionsAndParticipants(eid),\n        loadTransactions(eid),\n        loadVoteCodeRequests(eid),\n    ]);\n}\n\nwatch(() => props.eventId, loadDashboardData);\n</script>\n"],"names":["ChartJS","BarElement","CategoryScale","Legend","LinearScale","Tooltip","props","__props","t","useI18n","chartOptions","chartData","computed","c","_createBlock","ChartCard","_unref","faChartBar","_createVNode","Bar","ArcElement","chartColors","faChartPie","Pie","daysUntil","eventDate","Temporal","today","ADMIN_TIMEZONE","displayText","days","chipColor","_component_v_chip","router","useRouter","d","auth","useAuth","event","ref","eventIdNum","parseInt","breadcrumbs","stats","recentBlogPosts","recentCompoEntries","compos","competitions","compoEntryCounts","competitionParticipantCounts","getCompoName","compoId","loadEvent","eid","response","api.adminEventsRetrieve","loadBlogPosts","PermissionTarget","blogPosts","api.adminBlogList","publicPosts","p","loadComposAndEntries","compoResponse","entriesResponse","api.adminEventKompomaattiComposList","api.adminEventKompomaattiEntriesList","compoList","entries","entryCounts","entry","loadCompetitionsAndParticipants","competitionsResponse","participantsResponse","api.adminEventKompomaattiCompetitionsList","api.adminEventKompomaattiCompetitionParticipationsList","competitionList","participants","participantCounts","loadTransactions","transactions","api.adminEventStoreTransactionsList","paidTransactions","tx","loadVoteCodeRequests","voteRequests","api.adminEventKompomaattiVoteCodeRequestsList","pendingRequests","r","loadDashboardData","watch","LayoutBase","_component_v_row","_component_v_col","_component_v_card","_component_v_card_title","FontAwesomeIcon","faCalendarDays","_createTextVNode","_component_v_card_text","_createElementVNode","_hoisted_1","_toDisplayString","_openBlock","_createElementBlock","_hoisted_2","_hoisted_3","EventCountdown","StatCard","faNewspaper","_cache","$event","faFilm","faMedal","faCreditCard","faCheckToSlot","EntriesPerCompoChart","CompetitionParticipantsChart","faClockRotateLeft","_component_v_list","_Fragment","_renderList","post","_component_v_list_item","faEye","faEyeSlash","_normalizeClass","_hoisted_4","faFileImport","faFile","_hoisted_5","RefreshControl"],"mappings":"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"}