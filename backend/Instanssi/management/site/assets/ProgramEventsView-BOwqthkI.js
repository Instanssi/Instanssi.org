import{d as M,a as G,b as s,c as u,j as e,e as l,a0 as X,k as v,K as d,G as E,_ as Q,u as Y,H as Z,I as ee,v as te,a1 as ae,g as L,w as i,P as y,V as le,i as S,t as A,J as ne,m as ie,a2 as re,q as se,s as m,a3 as oe,a4 as ce,E as ue}from"./index-BSHMv_df.js";import{_ as me}from"./BooleanIcon.vue_vue_type_script_setup_true_lang-COcceYO8.js";import{_ as D}from"./DateTimeCell.vue_vue_type_script_setup_true_lang-CG8AjqQo.js";import{I as $}from"./ImageCell-yz-yO6nd.js";import{V as R,_ as de}from"./LayoutBase.vue_vue_type_script_setup_true_lang-C8aKWyeJ.js";import{c as ve,f as fe,d as ke,e as ge,g as pe}from"./index-DW3SUbXG.js";import{_ as he}from"./TableActionButtons.vue_vue_type_script_setup_true_lang-DouyropJ.js";import{d as _e,V as be,g as we}from"./query_tools-Co6bP9h2.js";import{g as ye}from"./http-BZkoYM_m.js";import{V as F}from"./VRow-BUBfmFS3.js";import{p as Ee}from"./parseInt-3OpbdfxQ.js";import"./datetime-DsxOZgAd.js";import"./classApi-bnmGQydb.js";import"./VContainer--EpXOfw5.js";import"./VDataTable-CpUosGjF.js";import"./filter-C6Uu0LOB.js";const Ve={class:"social-links-cell"},Pe=["href","title"],Ue=["href","title"],Ie=["href","title"],xe=["href","title"],Ce=["href","title"],Te=["href","title"],Le={key:6,class:"no-links"},Se=M({__name:"SocialLinksCell",props:{homeUrl:{},twitterUrl:{},githubUrl:{},facebookUrl:{},linkedinUrl:{},wikiUrl:{}},setup(n){const o=n,{t}=G(),g=E(()=>!!(o.homeUrl||o.twitterUrl||o.githubUrl||o.facebookUrl||o.linkedinUrl||o.wikiUrl));return(V,p)=>(s(),u("div",Ve,[n.homeUrl?(s(),u("a",{key:0,href:n.homeUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.home")},[l(e(v),{icon:e(X)},null,8,["icon"])],8,Pe)):d("",!0),n.twitterUrl?(s(),u("a",{key:1,href:n.twitterUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.twitter")},[l(e(v),{icon:e(ve)},null,8,["icon"])],8,Ue)):d("",!0),n.githubUrl?(s(),u("a",{key:2,href:n.githubUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.github")},[l(e(v),{icon:e(fe)},null,8,["icon"])],8,Ie)):d("",!0),n.facebookUrl?(s(),u("a",{key:3,href:n.facebookUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.facebook")},[l(e(v),{icon:e(ke)},null,8,["icon"])],8,xe)):d("",!0),n.linkedinUrl?(s(),u("a",{key:4,href:n.linkedinUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.linkedin")},[l(e(v),{icon:e(ge)},null,8,["icon"])],8,Ce)):d("",!0),n.wikiUrl?(s(),u("a",{key:5,href:n.wikiUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.wikipedia")},[l(e(v),{icon:e(pe)},null,8,["icon"])],8,Te)):d("",!0),g.value?d("",!0):(s(),u("span",Le,"-"))]))}}),Ae=Q(Se,[["__scopeId","data-v-352bfabc"]]),Xe=M({__name:"ProgramEventsView",props:{eventId:{}},setup(n){const o=n,{t}=G(),g=Y(),V=Z(ee),p=te(),h=se(),{getEventById:N}=ue(),f=E(()=>Ee(o.eventId,10)),_=m(!1),B=E(()=>[{title:N(f.value)?.name??"...",to:{name:"dashboard",params:{eventId:o.eventId}}},{title:t("ProgramEventsView.title"),disabled:!0}]),P=[25,50,100],U=m(P[0]),I=m(0),O=m(1),x=m([]),b=m(""),k=m(null),w=m(null),j=[{title:t("ProgramEventsView.eventTypes.0"),value:0},{title:t("ProgramEventsView.eventTypes.1"),value:1}],q=[{title:t("ProgramEventsView.headers.id"),sortable:!0,key:"id"},{title:t("ProgramEventsView.headers.icon"),sortable:!1,key:"icon_small_url",width:60},{title:t("ProgramEventsView.headers.icon2"),sortable:!1,key:"icon2_small_url",width:60},{title:t("ProgramEventsView.headers.title"),sortable:!1,key:"title"},{title:t("ProgramEventsView.headers.start"),sortable:!0,key:"start"},{title:t("ProgramEventsView.headers.end"),sortable:!0,key:"end"},{title:t("ProgramEventsView.headers.place"),sortable:!1,key:"place"},{title:t("ProgramEventsView.headers.socialLinks"),sortable:!1,key:"social_links"},{title:t("ProgramEventsView.headers.eventType"),sortable:!1,key:"event_type"},{title:t("ProgramEventsView.headers.active"),sortable:!1,key:"active"},{title:t("ProgramEventsView.headers.actions"),sortable:!1,key:"actions",align:"end"}];function C(){w.value&&T(w.value)}async function T(c){_.value=!0,w.value=c;try{const r=await ce({path:{event_pk:f.value},query:{...we(c),...k.value!==null?{event_type:k.value}:{}}});x.value=r.data.results,I.value=r.data.count}catch(r){p.error(t("ProgramEventsView.loadFailure")),console.error(r)}finally{_.value=!1}}const H=_e(T,250);ae(k,()=>{C()});async function K(c){const r=t("ProgramEventsView.confirmDelete",c);await V.value.ifConfirmed(r,async()=>{try{await oe({path:{event_pk:f.value,id:c.id}}),p.success(t("ProgramEventsView.deleteSuccess")),C()}catch(a){p.error(ye(a,t("ProgramEventsView.deleteFailure"))),console.error(a)}})}function W(c){g.push({name:"program-edit",params:{eventId:f.value,id:c}})}function z(){g.push({name:"program-new",params:{eventId:f.value}})}return(c,r)=>(s(),L(de,{key:`program-${f.value}`,breadcrumbs:B.value},{default:i(()=>[l(R,null,{default:i(()=>[l(F,null,{default:i(()=>[e(h).canAdd(e(y).PROGRAMME_EVENT)?(s(),L(le,{key:0,onClick:z},{prepend:i(()=>[l(e(v),{icon:e(ne)},null,8,["icon"])]),default:i(()=>[S(" "+A(e(t)("ProgramEventsView.newProgramEvent")),1)]),_:1})):d("",!0),l(ie,{modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=a=>b.value=a),variant:"outlined",density:"compact",label:e(t)("General.search"),style:{"max-width":"400px"},class:"ma-0 pa-0 ml-4",clearable:""},null,8,["modelValue","label"]),l(re,{modelValue:k.value,"onUpdate:modelValue":r[1]||(r[1]=a=>k.value=a),variant:"outlined",density:"compact",label:e(t)("ProgramEventsView.filterEventType"),items:j,style:{"max-width":"200px"},class:"ma-0 pa-0 ml-4",clearable:""},null,8,["modelValue","label"])]),_:1})]),_:1}),l(R,null,{default:i(()=>[l(F,null,{default:i(()=>[l(be,{"items-per-page":U.value,"onUpdate:itemsPerPage":r[2]||(r[2]=a=>U.value=a),class:"elevation-1 primary","item-value":"id",density:"compact",headers:q,items:x.value,"items-length":I.value,loading:_.value,search:b.value,page:O.value,"items-per-page-options":P,"no-data-text":e(t)("ProgramEventsView.noProgramEventsFound"),"loading-text":e(t)("ProgramEventsView.loadingProgramEvents"),"onUpdate:options":e(H)},{"item.icon_small_url":i(({item:a})=>[l($,{url:a.icon_small_url},null,8,["url"])]),"item.icon2_small_url":i(({item:a})=>[l($,{url:a.icon2_small_url},null,8,["url"])]),"item.start":i(({item:a})=>[l(D,{value:a.start},null,8,["value"])]),"item.end":i(({item:a})=>[l(D,{value:a.end},null,8,["value"])]),"item.social_links":i(({item:a})=>[l(Ae,{"home-url":a.home_url,"twitter-url":a.twitter_url,"github-url":a.github_url,"facebook-url":a.facebook_url,"linkedin-url":a.linkedin_url,"wiki-url":a.wiki_url},null,8,["home-url","twitter-url","github-url","facebook-url","linkedin-url","wiki-url"])]),"item.event_type":i(({item:a})=>[S(A(e(t)(`ProgramEventsView.eventTypes.${a.event_type}`)),1)]),"item.active":i(({item:a})=>[l(me,{value:a.active},null,8,["value"])]),"item.actions":i(({item:a})=>[l(he,{"can-edit":e(h).canChange(e(y).PROGRAMME_EVENT),"can-delete":e(h).canDelete(e(y).PROGRAMME_EVENT),onEdit:J=>W(a.id),onDelete:J=>K(a)},null,8,["can-edit","can-delete","onEdit","onDelete"])]),_:1},8,["items-per-page","items","items-length","loading","search","page","no-data-text","loading-text","onUpdate:options"])]),_:1})]),_:1})]),_:1},8,["breadcrumbs"]))}});export{Xe as default};
//# sourceMappingURL=ProgramEventsView-BOwqthkI.js.map
