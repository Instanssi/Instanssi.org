import{d as G,a as N,b as s,c as u,j as e,e as l,a1 as Q,k as f,K as d,G as V,_ as Y,u as ee,H as te,I as ae,v as le,Z as S,g as A,w as i,P as E,V as ne,i as D,t as $,J as ie,m as re,a2 as se,q as oe,s as m,a3 as ce,a4 as ue,E as me}from"./index-qrfwdmHz.js";import{_ as de}from"./BooleanIcon.vue_vue_type_script_setup_true_lang-BztPFn-1.js";import{_ as R}from"./DateTimeCell.vue_vue_type_script_setup_true_lang-DEE2ektI.js";import{I as B}from"./ImageCell-C0IQi5no.js";import{V as F,_ as ve}from"./LayoutBase.vue_vue_type_script_setup_true_lang-Cgp8Musd.js";import{c as fe,f as ge,d as ke,e as pe,g as he}from"./index-DW3SUbXG.js";import{_ as _e}from"./TableActionButtons.vue_vue_type_script_setup_true_lang-B6FHDr2a.js";import{d as be,V as we,g as ye}from"./query_tools-Ch1hnqwl.js";import{g as Ee}from"./http-Cqy_sGiB.js";import{V as M}from"./VRow-EkiCBxID.js";import{p as Ve}from"./parseInt-CGa1F4cm.js";import"./datetime-DsxOZgAd.js";import"./classApi-bnmGQydb.js";import"./VContainer-e74dHNZG.js";import"./VDataTable-BIkGv4dg.js";import"./filter-50Rnsb7m.js";const Pe={class:"social-links-cell"},Ue=["href","title"],Ie=["href","title"],xe=["href","title"],Ce=["href","title"],Te=["href","title"],Le=["href","title"],Se={key:6,class:"no-links"},Ae=G({__name:"SocialLinksCell",props:{homeUrl:{},twitterUrl:{},githubUrl:{},facebookUrl:{},linkedinUrl:{},wikiUrl:{}},setup(n){const o=n,{t}=N(),k=V(()=>!!(o.homeUrl||o.twitterUrl||o.githubUrl||o.facebookUrl||o.linkedinUrl||o.wikiUrl));return(P,p)=>(s(),u("div",Pe,[n.homeUrl?(s(),u("a",{key:0,href:n.homeUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.home")},[l(e(f),{icon:e(Q)},null,8,["icon"])],8,Ue)):d("",!0),n.twitterUrl?(s(),u("a",{key:1,href:n.twitterUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.twitter")},[l(e(f),{icon:e(fe)},null,8,["icon"])],8,Ie)):d("",!0),n.githubUrl?(s(),u("a",{key:2,href:n.githubUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.github")},[l(e(f),{icon:e(ge)},null,8,["icon"])],8,xe)):d("",!0),n.facebookUrl?(s(),u("a",{key:3,href:n.facebookUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.facebook")},[l(e(f),{icon:e(ke)},null,8,["icon"])],8,Ce)):d("",!0),n.linkedinUrl?(s(),u("a",{key:4,href:n.linkedinUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.linkedin")},[l(e(f),{icon:e(pe)},null,8,["icon"])],8,Te)):d("",!0),n.wikiUrl?(s(),u("a",{key:5,href:n.wikiUrl,target:"_blank",class:"social-link",title:e(t)("SocialLinksCell.wikipedia")},[l(e(f),{icon:e(he)},null,8,["icon"])],8,Le)):d("",!0),k.value?d("",!0):(s(),u("span",Se,"-"))]))}}),De=Y(Ae,[["__scopeId","data-v-352bfabc"]]),Ze=G({__name:"ProgramEventsView",props:{eventId:{}},setup(n){const o=n,{t}=N(),k=ee(),P=te(ae),p=le(),_=oe(),{getEventById:O}=me(),v=V(()=>Ve(o.eventId,10)),b=m(!1),j=V(()=>[{title:O(v.value)?.name??"...",to:{name:"dashboard",params:{eventId:o.eventId}}},{title:t("ProgramEventsView.title"),disabled:!0}]),U=[25,50,100],w=m(U[0]),I=m(0),q=m(1),x=m([]),h=m(""),g=m(null),y=m(null),H=[{title:t("ProgramEventsView.eventTypes.0"),value:0},{title:t("ProgramEventsView.eventTypes.1"),value:1}],K=[{title:t("ProgramEventsView.headers.id"),sortable:!0,key:"id"},{title:t("ProgramEventsView.headers.icon"),sortable:!1,key:"icon_small_url",width:60},{title:t("ProgramEventsView.headers.icon2"),sortable:!1,key:"icon2_small_url",width:60},{title:t("ProgramEventsView.headers.title"),sortable:!1,key:"title"},{title:t("ProgramEventsView.headers.start"),sortable:!0,key:"start"},{title:t("ProgramEventsView.headers.end"),sortable:!0,key:"end"},{title:t("ProgramEventsView.headers.place"),sortable:!1,key:"place"},{title:t("ProgramEventsView.headers.socialLinks"),sortable:!1,key:"social_links"},{title:t("ProgramEventsView.headers.eventType"),sortable:!1,key:"event_type"},{title:t("ProgramEventsView.headers.active"),sortable:!1,key:"active"},{title:t("ProgramEventsView.headers.actions"),sortable:!1,key:"actions",align:"end"}];function C(){y.value&&T(y.value)}async function T(c){b.value=!0,y.value=c;try{const r=await ue({path:{event_pk:v.value},query:{...ye(c),...g.value!==null?{event_type:g.value}:{}}});x.value=r.data.results,I.value=r.data.count}catch(r){p.error(t("ProgramEventsView.loadFailure")),console.error(r)}finally{b.value=!1}}const L=be(T,250);S(g,()=>{C()});function W(){g.value=null,h.value="",L({page:1,itemsPerPage:w.value??25,sortBy:[],groupBy:[],search:""})}S(v,W);async function z(c){const r=t("ProgramEventsView.confirmDelete",c);await P.value.ifConfirmed(r,async()=>{try{await ce({path:{event_pk:v.value,id:c.id}}),p.success(t("ProgramEventsView.deleteSuccess")),C()}catch(a){p.error(Ee(a,t("ProgramEventsView.deleteFailure"))),console.error(a)}})}function J(c){k.push({name:"program-edit",params:{eventId:v.value,id:c}})}function X(){k.push({name:"program-new",params:{eventId:v.value}})}return(c,r)=>(s(),A(ve,{key:`program-${v.value}`,breadcrumbs:j.value},{default:i(()=>[l(F,null,{default:i(()=>[l(M,null,{default:i(()=>[e(_).canAdd(e(E).PROGRAMME_EVENT)?(s(),A(ne,{key:0,onClick:X},{prepend:i(()=>[l(e(f),{icon:e(ie)},null,8,["icon"])]),default:i(()=>[D(" "+$(e(t)("ProgramEventsView.newProgramEvent")),1)]),_:1})):d("",!0),l(re,{modelValue:h.value,"onUpdate:modelValue":r[0]||(r[0]=a=>h.value=a),variant:"outlined",density:"compact",label:e(t)("General.search"),style:{"max-width":"400px"},class:"ma-0 pa-0 ml-4",clearable:""},null,8,["modelValue","label"]),l(se,{modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=a=>g.value=a),variant:"outlined",density:"compact",label:e(t)("ProgramEventsView.filterEventType"),items:H,style:{"max-width":"200px"},class:"ma-0 pa-0 ml-4",clearable:""},null,8,["modelValue","label"])]),_:1})]),_:1}),l(F,null,{default:i(()=>[l(M,null,{default:i(()=>[l(we,{"items-per-page":w.value,"onUpdate:itemsPerPage":r[2]||(r[2]=a=>w.value=a),class:"elevation-1 primary","item-value":"id",density:"compact",headers:K,items:x.value,"items-length":I.value,loading:b.value,search:h.value,page:q.value,"items-per-page-options":U,"no-data-text":e(t)("ProgramEventsView.noProgramEventsFound"),"loading-text":e(t)("ProgramEventsView.loadingProgramEvents"),"onUpdate:options":e(L)},{"item.icon_small_url":i(({item:a})=>[l(B,{url:a.icon_small_url},null,8,["url"])]),"item.icon2_small_url":i(({item:a})=>[l(B,{url:a.icon2_small_url},null,8,["url"])]),"item.start":i(({item:a})=>[l(R,{value:a.start},null,8,["value"])]),"item.end":i(({item:a})=>[l(R,{value:a.end},null,8,["value"])]),"item.social_links":i(({item:a})=>[l(De,{"home-url":a.home_url,"twitter-url":a.twitter_url,"github-url":a.github_url,"facebook-url":a.facebook_url,"linkedin-url":a.linkedin_url,"wiki-url":a.wiki_url},null,8,["home-url","twitter-url","github-url","facebook-url","linkedin-url","wiki-url"])]),"item.event_type":i(({item:a})=>[D($(e(t)(`ProgramEventsView.eventTypes.${a.event_type}`)),1)]),"item.active":i(({item:a})=>[l(de,{value:a.active},null,8,["value"])]),"item.actions":i(({item:a})=>[l(_e,{"can-edit":e(_).canChange(e(E).PROGRAMME_EVENT),"can-delete":e(_).canDelete(e(E).PROGRAMME_EVENT),onEdit:Z=>J(a.id),onDelete:Z=>z(a)},null,8,["can-edit","can-delete","onEdit","onDelete"])]),_:1},8,["items-per-page","items","items-length","loading","search","page","no-data-text","loading-text","onUpdate:options"])]),_:1})]),_:1})]),_:1},8,["breadcrumbs"]))}});export{Ze as default};
//# sourceMappingURL=ProgramEventsView-CVUOj3HE.js.map
