{"version":3,"file":"TokensView-BpQqTfKX.js","sources":["../../../../../admin/src/views/tokens/TokenCreateDialog.vue","../../../../../admin/src/components/dialogs/TokenCreatedDialog.vue","../../../../../admin/src/views/tokens/TokensView.vue"],"sourcesContent":["<template>\n    <BaseInfoDialog\n        ref=\"dialog\"\n        :title=\"t('TokenCreateDialog.title')\"\n        :width=\"500\"\n        :ok-text=\"t('TokenCreateDialog.create')\"\n        :ok-icon=\"faKey\"\n        :loading=\"saving\"\n    >\n        <v-form @submit.prevent=\"submit\">\n            <v-text-field\n                v-model=\"expiryString\"\n                type=\"datetime-local\"\n                variant=\"outlined\"\n                :label=\"t('TokenCreateDialog.labels.expiry')\"\n                :min=\"minDateString\"\n                :error-messages=\"expiryError\"\n            />\n            <p class=\"text-caption mt-2 text-medium-emphasis\">\n                {{ t(\"TokenCreateDialog.expiryHint\") }}\n            </p>\n        </v-form>\n    </BaseInfoDialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { faKey } from \"@fortawesome/free-solid-svg-icons\";\nimport { type Ref, ref, watch } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport { useToast } from \"vue-toastification\";\n\nimport * as api from \"@/api\";\nimport BaseInfoDialog from \"@/components/dialogs/BaseInfoDialog.vue\";\nimport { handleApiError, type FieldMapping } from \"@/utils/http\";\n\nconst props = defineProps<{\n    visible: boolean;\n}>();\n\nconst emit = defineEmits<{\n    \"update:visible\": [value: boolean];\n    created: [token: string];\n}>();\n\nconst { t } = useI18n();\nconst toast = useToast();\n\nconst dialog: Ref<InstanceType<typeof BaseInfoDialog> | undefined> = ref(undefined);\nconst saving = ref(false);\nconst expiryString = ref(\"\");\nconst minDateString = ref(\"\");\nconst expiryError = ref(\"\");\n\n/** Maps API field names to local field error refs */\nconst fieldMapping: FieldMapping = { expiry: \"expiry\" };\n\nfunction setErrors(errors: Record<string, string>) {\n    expiryError.value = errors.expiry ?? \"\";\n}\n\n// Format date for datetime-local input (YYYY-MM-DDTHH:mm)\nfunction formatDateTimeLocal(date: Date): string {\n    const pad = (n: number) => n.toString().padStart(2, \"0\");\n    return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}T${pad(date.getHours())}:${pad(date.getMinutes())}`;\n}\n\n// Default expiry: 30 days from now\nfunction getDefaultExpiry(): string {\n    const date = new Date();\n    date.setDate(date.getDate() + 30);\n    return formatDateTimeLocal(date);\n}\n\nfunction resetForm() {\n    minDateString.value = formatDateTimeLocal(new Date());\n    expiryString.value = getDefaultExpiry();\n    expiryError.value = \"\";\n}\n\nwatch(\n    () => props.visible,\n    async (newVal) => {\n        if (newVal) {\n            // Initialize form state once when dialog opens\n            resetForm();\n            // Loop allows retrying on failure\n            while (true) {\n                const ok = await dialog.value?.modal();\n                if (!ok) {\n                    // User cancelled\n                    break;\n                }\n                const success = await submit();\n                if (success) {\n                    break;\n                }\n                // On failure, loop continues and dialog reopens for retry\n            }\n            emit(\"update:visible\", false);\n        }\n    }\n);\n\nasync function submit(): Promise<boolean> {\n    if (!expiryString.value) {\n        toast.error(t(\"TokenCreateDialog.expiryRequired\"));\n        return false;\n    }\n\n    const expiry = new Date(expiryString.value);\n    if (isNaN(expiry.getTime())) {\n        toast.error(t(\"TokenCreateDialog.expiryRequired\"));\n        return false;\n    }\n\n    saving.value = true;\n    try {\n        const response = await api.userTokensCreateToken({\n            body: {\n                expiry: expiry.toISOString(),\n            },\n        });\n        toast.success(t(\"TokenCreateDialog.createSuccess\"));\n        emit(\"created\", response.data!.token);\n        return true;\n    } catch (e) {\n        handleApiError(e, setErrors, toast, t(\"TokenCreateDialog.createFailure\"), fieldMapping);\n        return false;\n    } finally {\n        saving.value = false;\n    }\n}\n</script>\n","<template>\n    <BaseInfoDialog\n        ref=\"dialog\"\n        :title=\"t('TokenCreatedDialog.title')\"\n        :width=\"600\"\n        :ok-text=\"t('General.ok')\"\n        :ok-icon=\"faCheck\"\n        cancel-text=\"\"\n    >\n        <v-alert type=\"warning\" variant=\"tonal\" class=\"mb-4\">\n            {{ t(\"TokenCreatedDialog.warning\") }}\n        </v-alert>\n\n        <v-text-field\n            :model-value=\"token\"\n            variant=\"outlined\"\n            readonly\n            :label=\"t('TokenCreatedDialog.labels.token')\"\n            class=\"token-field\"\n        >\n            <template #append-inner>\n                <v-btn\n                    variant=\"text\"\n                    size=\"small\"\n                    :title=\"t('TokenCreatedDialog.copyToClipboard')\"\n                    @click=\"copyToClipboard\"\n                >\n                    <FontAwesomeIcon :icon=\"faCopy\" />\n                </v-btn>\n            </template>\n        </v-text-field>\n    </BaseInfoDialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { faCheck, faCopy } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { type Ref, ref, watch } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport { useToast } from \"vue-toastification\";\n\nimport BaseInfoDialog from \"@/components/dialogs/BaseInfoDialog.vue\";\n\nconst props = defineProps<{\n    visible: boolean;\n    token: string;\n}>();\n\nconst emit = defineEmits<{\n    \"update:visible\": [value: boolean];\n}>();\n\nconst { t } = useI18n();\nconst toast = useToast();\n\nconst dialog: Ref<InstanceType<typeof BaseInfoDialog> | undefined> = ref(undefined);\n\nwatch(\n    () => props.visible,\n    async (newVal) => {\n        if (newVal) {\n            await dialog.value?.modal();\n            emit(\"update:visible\", false);\n        }\n    }\n);\n\nasync function copyToClipboard() {\n    try {\n        await navigator.clipboard.writeText(props.token);\n        toast.success(t(\"TokenCreatedDialog.copySuccess\"));\n    } catch (e) {\n        toast.error(t(\"TokenCreatedDialog.copyFailure\"));\n        console.error(e);\n    }\n}\n</script>\n\n<style scoped>\n.token-field :deep(input) {\n    font-family: monospace;\n    font-size: 0.9em;\n}\n</style>\n","<template>\n    <LayoutBase :breadcrumbs=\"breadcrumbs\">\n        <v-col>\n            <v-row>\n                <v-btn\n                    v-if=\"auth.canAdd(PermissionTarget.AUTH_TOKEN)\"\n                    color=\"primary\"\n                    class=\"mb-4\"\n                    @click=\"showCreateDialog = true\"\n                >\n                    <template #prepend>\n                        <FontAwesomeIcon :icon=\"faPlus\" />\n                    </template>\n                    {{ t(\"TokensView.newToken\") }}\n                </v-btn>\n            </v-row>\n        </v-col>\n        <v-col>\n            <v-row>\n                <v-data-table-server\n                    v-model:items-per-page=\"tableState.perPage.value\"\n                    :sort-by=\"tableState.sortByArray.value\"\n                    class=\"elevation-1 primary\"\n                    item-value=\"pk\"\n                    density=\"compact\"\n                    :headers=\"headers\"\n                    :items=\"tokens\"\n                    :items-length=\"totalItems\"\n                    :loading=\"loading\"\n                    :page=\"tableState.page.value\"\n                    :items-per-page-options=\"tableState.pageSizeOptions\"\n                    :no-data-text=\"t('TokensView.noTokensFound')\"\n                    :loading-text=\"t('TokensView.loadingTokens')\"\n                    @update:options=\"onTableOptionsUpdate\"\n                >\n                    <template #item.token_key=\"{ item }\">\n                        <code>{{ item.token_key }}...</code>\n                    </template>\n                    <template #item.created=\"{ item }\">\n                        <DateTimeCell :value=\"item.created\" />\n                    </template>\n                    <template #item.expiry=\"{ item }\">\n                        <DateTimeCell :value=\"item.expiry\" />\n                    </template>\n                    <template #item.actions=\"{ item }\">\n                        <v-btn\n                            v-if=\"auth.canDelete(PermissionTarget.AUTH_TOKEN)\"\n                            variant=\"text\"\n                            color=\"error\"\n                            size=\"small\"\n                            @click=\"deleteToken(item)\"\n                        >\n                            <FontAwesomeIcon :icon=\"faTrash\" />\n                        </v-btn>\n                    </template>\n                </v-data-table-server>\n            </v-row>\n        </v-col>\n\n        <TokenCreateDialog v-model:visible=\"showCreateDialog\" @created=\"onTokenCreated\" />\n\n        <TokenCreatedDialog v-model:visible=\"showCreatedDialog\" :token=\"createdToken\" />\n    </LayoutBase>\n</template>\n\n<script setup lang=\"ts\">\nimport { faPlus, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { debounce } from \"lodash-es\";\nimport { type Ref, inject, ref } from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport { useToast } from \"vue-toastification\";\nimport { type VDataTable } from \"vuetify/components\";\n\nimport * as api from \"@/api\";\nimport type { AuthToken } from \"@/api\";\nimport DateTimeCell from \"@/components/table/DateTimeCell.vue\";\nimport LayoutBase, { type BreadcrumbItem } from \"@/components/layout/LayoutBase.vue\";\nimport TokenCreateDialog from \"@/views/tokens/TokenCreateDialog.vue\";\nimport TokenCreatedDialog from \"@/components/dialogs/TokenCreatedDialog.vue\";\nimport { useTableState } from \"@/composables/useTableState\";\nimport { PermissionTarget, useAuth } from \"@/services/auth\";\nimport { type LoadArgs, getLoadArgs } from \"@/services/utils/query_tools\";\nimport { confirmDialogKey } from \"@/symbols\";\nimport type { ConfirmDialogType } from \"@/symbols\";\nimport { getApiErrorMessage } from \"@/utils/http\";\n\ntype ReadonlyHeaders = VDataTable[\"$props\"][\"headers\"];\n\nconst { t } = useI18n();\nconst confirmDialog: ConfirmDialogType = inject(confirmDialogKey)!;\nconst toast = useToast();\nconst auth = useAuth();\n\nconst breadcrumbs: BreadcrumbItem[] = [{ title: t(\"TokensView.title\"), disabled: true }];\n\nconst loading = ref(false);\nconst tableState = useTableState();\nconst totalItems = ref(0);\nconst tokens: Ref<AuthToken[]> = ref([]);\nconst lastLoadArgs: Ref<LoadArgs | null> = ref(null);\nconst showCreateDialog = ref(false);\nconst showCreatedDialog = ref(false);\nconst createdToken = ref(\"\");\n\nconst headers: ReadonlyHeaders = [\n    {\n        title: t(\"TokensView.headers.tokenKey\"),\n        sortable: false,\n        key: \"token_key\",\n    },\n    {\n        title: t(\"TokensView.headers.created\"),\n        sortable: true,\n        key: \"created\",\n    },\n    {\n        title: t(\"TokensView.headers.expiry\"),\n        sortable: true,\n        key: \"expiry\",\n    },\n    {\n        title: t(\"TokensView.headers.actions\"),\n        sortable: false,\n        key: \"actions\",\n        align: \"end\",\n    },\n];\n\nfunction flushData() {\n    if (lastLoadArgs.value) {\n        load(lastLoadArgs.value);\n    }\n}\n\nasync function load(args: LoadArgs) {\n    loading.value = true;\n    lastLoadArgs.value = args;\n    try {\n        const response = await api.tokensList({ query: getLoadArgs(args) });\n        tokens.value = response.data!.results;\n        totalItems.value = response.data!.count;\n    } catch (e) {\n        toast.error(t(\"TokensView.loadFailure\"));\n        console.error(e);\n    } finally {\n        loading.value = false;\n    }\n}\n\nconst debouncedLoad = debounce(load, 250);\n\nfunction onTableOptionsUpdate(args: LoadArgs) {\n    tableState.onOptionsUpdate(args);\n    debouncedLoad(args);\n}\n\nasync function deleteToken(item: AuthToken): Promise<void> {\n    const text = t(\"TokensView.confirmDelete\", { tokenKey: item.token_key });\n    const ok = await confirmDialog.value!.confirm(text);\n    if (ok) {\n        try {\n            await api.tokensDestroy({ path: { digest: item.pk } });\n            flushData();\n            toast.success(t(\"TokensView.deleteSuccess\"));\n        } catch (e) {\n            toast.error(getApiErrorMessage(e, t(\"TokensView.deleteFailure\")));\n            console.error(e);\n        }\n    }\n}\n\nfunction onTokenCreated(token: string) {\n    createdToken.value = token;\n    showCreatedDialog.value = true;\n    flushData();\n}\n</script>\n"],"names":["props","__props","emit","__emit","useI18n","toast","useToast","dialog","ref","saving","expiryString","minDateString","expiryError","fieldMapping","setErrors","errors","formatDateTimeLocal","date","pad","n","getDefaultExpiry","resetForm","watch","newVal","submit","expiry","response","api.userTokensCreateToken","e","handleApiError","_createBlock","BaseInfoDialog","_unref","faKey","_createVNode","_component_v_form","_component_v_text_field","$event","_createElementVNode","_hoisted_1","_toDisplayString","copyToClipboard","faCheck","_component_v_alert","_component_v_btn","FontAwesomeIcon","faCopy","t","confirmDialog","inject","confirmDialogKey","auth","useAuth","breadcrumbs","loading","tableState","useTableState","totalItems","tokens","lastLoadArgs","showCreateDialog","showCreatedDialog","createdToken","headers","flushData","load","args","api.tokensList","getLoadArgs","debouncedLoad","debounce","onTableOptionsUpdate","deleteToken","item","text","api.tokensDestroy","getApiErrorMessage","onTokenCreated","token","LayoutBase","_component_v_col","_component_v_row","PermissionTarget","faPlus","_createTextVNode","_component_v_data_table_server","_withCtx","DateTimeCell","faTrash","TokenCreateDialog","TokenCreatedDialog"],"mappings":"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"}