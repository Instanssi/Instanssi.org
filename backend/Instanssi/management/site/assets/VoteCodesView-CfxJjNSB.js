import{d as P,a as T,v as B,L,b as S,g as U,w as r,e as l,j as s,i as g,t as V,I as f,s as d,bF as A,H as E}from"./index-CQkWvXOv.js";import{_ as F}from"./DateTimeCell.vue_vue_type_script_setup_true_lang-DaLynL44.js";import{V as O,_ as $}from"./LayoutBase.vue_vue_type_script_setup_true_lang-D5aCeQDf.js";import{u as D,d as N}from"./useTableState-CutuDm2i.js";import{g as j}from"./query_tools-BInV9OzK.js";import{V as q}from"./VRow-CXIXhuhq.js";import{V as z}from"./VDataTableServer-C6tuZDKn.js";import{p as H}from"./parseInt-BJ5A4_3y.js";import"./datetime-Dz9fjSvq.js";import"./VContainer-DqJ8gu3P.js";import"./VDataTable-f5_9vewM.js";const te=P({__name:"VoteCodesView",props:{eventId:{}},setup(b){const m=b,{t:e}=T(),y=B(),{getEventById:_}=E(),n=f(()=>H(m.eventId,10)),u=d(!1),C=f(()=>[{title:_(n.value)?.name??"...",to:{name:"dashboard",params:{eventId:m.eventId}}},{title:e("VoteCodesView.title"),disabled:!0}]),t=D(),p=d(0),c=d([]),w=d(null),h=[{title:e("VoteCodesView.headers.id"),sortable:!0,key:"id"},{title:e("VoteCodesView.headers.associatedTo"),sortable:!1,key:"associated_username"},{title:e("VoteCodesView.headers.ticket"),sortable:!1,key:"ticket"},{title:e("VoteCodesView.headers.time"),sortable:!0,key:"time"}];async function k(i){u.value=!0,w.value=i;try{const a=await A({path:{event_pk:n.value},query:{...j(i)}});c.value=a.data.results,p.value=a.data.count}catch(a){y.error(e("VoteCodesView.loadFailure")),console.error(a)}finally{u.value=!1}}const v=N(k,250);function I(i){t.onOptionsUpdate(i),v(i)}function x(){t.page.value=1,v({page:1,itemsPerPage:t.perPage.value??25,sortBy:[],groupBy:[],search:""})}return L(n,x),(i,a)=>(S(),U($,{key:`vote-codes-${n.value}`,breadcrumbs:C.value},{default:r(()=>[l(O,null,{default:r(()=>[l(q,null,{default:r(()=>[l(z,{"items-per-page":s(t).perPage.value,"onUpdate:itemsPerPage":a[0]||(a[0]=o=>s(t).perPage.value=o),"sort-by":s(t).sortByArray.value,class:"elevation-1 primary","item-value":"id",density:"compact",headers:h,items:c.value,"items-length":p.value,loading:u.value,page:s(t).page.value,"items-per-page-options":s(t).pageSizeOptions,"no-data-text":s(e)("VoteCodesView.noVoteCodesFound"),"loading-text":s(e)("VoteCodesView.loadingVoteCodes"),"onUpdate:options":I},{"item.time":r(({item:o})=>[l(F,{value:o.time},null,8,["value"])]),"item.associated_username":r(({item:o})=>[g(V(o.associated_username??"-"),1)]),"item.ticket":r(({item:o})=>[g(V(o.ticket??"-"),1)]),_:1},8,["items-per-page","sort-by","items","items-length","loading","page","items-per-page-options","no-data-text","loading-text"])]),_:1})]),_:1})]),_:1},8,["breadcrumbs"]))}});export{te as default};
//# sourceMappingURL=VoteCodesView-CfxJjNSB.js.map
