import{d as B,a as T,v as E,Z as L,b as S,g as U,w as o,e as r,j as u,i as g,t as f,G as _,s,bq as $,E as q}from"./index-CY4kEXQX.js";import{_ as A}from"./DateTimeCell.vue_vue_type_script_setup_true_lang-CA7qmznU.js";import{V as D,_ as F}from"./LayoutBase.vue_vue_type_script_setup_true_lang-mBpG7FYr.js";import{d as N,V as j,g as z}from"./query_tools-D1ttn1y9.js";import{V as G}from"./VRow-Dt2mDaW0.js";import{p as K}from"./parseInt-DjOfejfT.js";import"./datetime-DsxOZgAd.js";import"./classApi-bnmGQydb.js";import"./VContainer-DyZfstE_.js";import"./VDataTable-K-Y489M6.js";import"./filter-B_C-txEo.js";const te=B({__name:"VoteCodesView",props:{eventId:{}},setup(b){const m=b,{t:e}=T(),C=E(),{getEventById:y}=q(),i=_(()=>K(m.eventId,10)),n=s(!1),w=_(()=>[{title:y(i.value)?.name??"...",to:{name:"dashboard",params:{eventId:m.eventId}}},{title:e("VoteCodesView.title"),disabled:!0}]),c=[25,50,100],d=s(c[0]),p=s(0),h=s(1),v=s([]),k=s(null),I=[{title:e("VoteCodesView.headers.id"),sortable:!0,key:"id"},{title:e("VoteCodesView.headers.associatedTo"),sortable:!1,key:"associated_username"},{title:e("VoteCodesView.headers.ticket"),sortable:!1,key:"ticket"},{title:e("VoteCodesView.headers.time"),sortable:!0,key:"time"}];async function x(l){n.value=!0,k.value=l;try{const t=await $({path:{event_pk:i.value},query:{...z(l)}});v.value=t.data.results,p.value=t.data.count}catch(t){C.error(e("VoteCodesView.loadFailure")),console.error(t)}finally{n.value=!1}}const V=N(x,250);function P(){V({page:1,itemsPerPage:d.value??25,sortBy:[],groupBy:[],search:""})}return L(i,P),(l,t)=>(S(),U(F,{key:`vote-codes-${i.value}`,breadcrumbs:w.value},{default:o(()=>[r(D,null,{default:o(()=>[r(G,null,{default:o(()=>[r(j,{"items-per-page":d.value,"onUpdate:itemsPerPage":t[0]||(t[0]=a=>d.value=a),class:"elevation-1 primary","item-value":"id",density:"compact",headers:I,items:v.value,"items-length":p.value,loading:n.value,page:h.value,"items-per-page-options":c,"no-data-text":u(e)("VoteCodesView.noVoteCodesFound"),"loading-text":u(e)("VoteCodesView.loadingVoteCodes"),"onUpdate:options":u(V)},{"item.time":o(({item:a})=>[r(A,{value:a.time},null,8,["value"])]),"item.associated_username":o(({item:a})=>[g(f(a.associated_username??"-"),1)]),"item.ticket":o(({item:a})=>[g(f(a.ticket??"-"),1)]),_:1},8,["items-per-page","items","items-length","loading","page","no-data-text","loading-text","onUpdate:options"])]),_:1})]),_:1})]),_:1},8,["breadcrumbs"]))}});export{te as default};
//# sourceMappingURL=VoteCodesView-DEdKlkZA.js.map
