import{d as T,a as E,v as P,b as B,g as L,w as o,e as i,j as d,i as V,t as g,G as f,s,bq as S,E as U}from"./index-BSHMv_df.js";import{_ as $}from"./DateTimeCell.vue_vue_type_script_setup_true_lang-CG8AjqQo.js";import{V as q,_ as D}from"./LayoutBase.vue_vue_type_script_setup_true_lang-C8aKWyeJ.js";import{d as F,V as N,g as j}from"./query_tools-Co6bP9h2.js";import{V as z}from"./VRow-BUBfmFS3.js";import{p as _}from"./parseInt-3OpbdfxQ.js";import"./datetime-DsxOZgAd.js";import"./classApi-bnmGQydb.js";import"./VContainer--EpXOfw5.js";import"./VDataTable-CpUosGjF.js";import"./filter-C6Uu0LOB.js";const Y=T({__name:"VoteCodesView",props:{eventId:{}},setup(b){const n=b,{t:e}=E(),C=P(),{getEventById:k}=U(),l=f(()=>_(n.eventId,10)),r=s(!1),w=f(()=>[{title:k(l.value)?.name??"...",to:{name:"dashboard",params:{eventId:n.eventId}}},{title:e("VoteCodesView.title"),disabled:!0}]),m=[25,50,100],u=s(m[0]),c=s(0),y=s(1),p=s([]),h=[{title:e("VoteCodesView.headers.id"),sortable:!0,key:"id"},{title:e("VoteCodesView.headers.associatedTo"),sortable:!1,key:"associated_username"},{title:e("VoteCodesView.headers.ticket"),sortable:!1,key:"ticket"},{title:e("VoteCodesView.headers.time"),sortable:!0,key:"time"}];async function I(v){r.value=!0;try{const t=await S({path:{event_pk:_(n.eventId,10)},query:{...j(v)}});p.value=t.data.results,c.value=t.data.count}catch(t){C.error(e("VoteCodesView.loadFailure")),console.error(t)}finally{r.value=!1}}const x=F(I,250);return(v,t)=>(B(),L(D,{key:`vote-codes-${l.value}`,breadcrumbs:w.value},{default:o(()=>[i(q,null,{default:o(()=>[i(z,null,{default:o(()=>[i(N,{"items-per-page":u.value,"onUpdate:itemsPerPage":t[0]||(t[0]=a=>u.value=a),class:"elevation-1 primary","item-value":"id",density:"compact",headers:h,items:p.value,"items-length":c.value,loading:r.value,page:y.value,"items-per-page-options":m,"no-data-text":d(e)("VoteCodesView.noVoteCodesFound"),"loading-text":d(e)("VoteCodesView.loadingVoteCodes"),"onUpdate:options":d(x)},{"item.time":o(({item:a})=>[i($,{value:a.time},null,8,["value"])]),"item.associated_username":o(({item:a})=>[V(g(a.associated_username??"-"),1)]),"item.ticket":o(({item:a})=>[V(g(a.ticket??"-"),1)]),_:1},8,["items-per-page","items","items-length","loading","page","no-data-text","loading-text","onUpdate:options"])]),_:1})]),_:1})]),_:1},8,["breadcrumbs"]))}});export{Y as default};
//# sourceMappingURL=VoteCodesView-DbVEhGbq.js.map
