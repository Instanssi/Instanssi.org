import{d as B,a as T,v as L,U,b as E,g as S,w as o,e as r,j as m,i as f,t as g,I as _,s,bx as $,H as A}from"./index-DXU74lGt.js";import{_ as D}from"./DateTimeCell.vue_vue_type_script_setup_true_lang-BMnBYvTq.js";import{V as F,_ as N}from"./LayoutBase.vue_vue_type_script_setup_true_lang-D4jd1chv.js";import{g as j}from"./query_tools-BInV9OzK.js";import{d as q}from"./debounce-CQ84CrOG.js";import{V as z}from"./VRow-B94Tto0H.js";import{V as H}from"./VDataTableServer-CMLVDy59.js";import{p as K}from"./parseInt-Bzw_2rWL.js";import"./datetime-Dz9fjSvq.js";import"./VContainer-BfWqa_tJ.js";import"./VDataTable-Jd7io3gq.js";const te=B({__name:"VoteCodesView",props:{eventId:{}},setup(b){const u=b,{t:e}=T(),C=L(),{getEventById:y}=A(),i=_(()=>K(u.eventId,10)),n=s(!1),w=_(()=>[{title:y(i.value)?.name??"...",to:{name:"dashboard",params:{eventId:u.eventId}}},{title:e("VoteCodesView.title"),disabled:!0}]),c=[25,50,100],d=s(c[0]),p=s(0),h=s(1),v=s([]),k=s(null),I=[{title:e("VoteCodesView.headers.id"),sortable:!0,key:"id"},{title:e("VoteCodesView.headers.associatedTo"),sortable:!1,key:"associated_username"},{title:e("VoteCodesView.headers.ticket"),sortable:!1,key:"ticket"},{title:e("VoteCodesView.headers.time"),sortable:!0,key:"time"}];async function x(l){n.value=!0,k.value=l;try{const t=await $({path:{event_pk:i.value},query:{...j(l)}});v.value=t.data.results,p.value=t.data.count}catch(t){C.error(e("VoteCodesView.loadFailure")),console.error(t)}finally{n.value=!1}}const V=q(x,250);function P(){V({page:1,itemsPerPage:d.value??25,sortBy:[],groupBy:[],search:""})}return U(i,P),(l,t)=>(E(),S(N,{key:`vote-codes-${i.value}`,breadcrumbs:w.value},{default:o(()=>[r(F,null,{default:o(()=>[r(z,null,{default:o(()=>[r(H,{"items-per-page":d.value,"onUpdate:itemsPerPage":t[0]||(t[0]=a=>d.value=a),class:"elevation-1 primary","item-value":"id",density:"compact",headers:I,items:v.value,"items-length":p.value,loading:n.value,page:h.value,"items-per-page-options":c,"no-data-text":m(e)("VoteCodesView.noVoteCodesFound"),"loading-text":m(e)("VoteCodesView.loadingVoteCodes"),"onUpdate:options":m(V)},{"item.time":o(({item:a})=>[r(D,{value:a.time},null,8,["value"])]),"item.associated_username":o(({item:a})=>[f(g(a.associated_username??"-"),1)]),"item.ticket":o(({item:a})=>[f(g(a.ticket??"-"),1)]),_:1},8,["items-per-page","items","items-length","loading","page","no-data-text","loading-text","onUpdate:options"])]),_:1})]),_:1})]),_:1},8,["breadcrumbs"]))}});export{te as default};
//# sourceMappingURL=VoteCodesView-EPJ6UbmA.js.map
