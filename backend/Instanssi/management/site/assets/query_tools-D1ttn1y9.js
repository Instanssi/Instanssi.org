import{c as Y,b as Z,d as ee,e as te,p as ae,f as re,g as ne,h as oe,i as ie,u as se,m as le,j as ue,k as de,l as C,n as G,o as H,V as W,q as ce,r as me}from"./VDataTable-K-Y489M6.js";import{aJ as fe,cc as ge,cd as ve,aS as be,aU as pe,bc as g,aV as ye,e as x,f as V,at as he,F as A,a$ as w,G as F,ce as Te}from"./index-CY4kEXQX.js";import{i as Se,r as Pe}from"./LayoutBase.vue_vue_type_script_setup_true_lang-mBpG7FYr.js";const xe=pe({itemsLength:{type:[Number,String],required:!0},...de(),...ue(),...le()},"VDataTableServer"),We=fe()({name:"VDataTableServer",props:xe(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:i,slots:a}=t;const{groupBy:l}=Y(e),{initialSortOrder:v,sortBy:o,multiSort:n,mustSort:c}=Z(e),{page:u,itemsPerPage:b}=ee(e),{disableSort:m}=ge(e),T=F(()=>parseInt(e.itemsLength,10)),{columns:p,headers:B}=te(e,{groupBy:l,showSelect:g(()=>e.showSelect),showExpand:g(()=>e.showExpand)}),{items:y}=ce(e,p),{toggleSort:S}=ae({initialSortOrder:v,sortBy:o,multiSort:n,mustSort:c,page:u}),{opened:h,isGroupOpen:D,toggleGroup:k,extractRows:E}=re({groupBy:l,sortBy:o,disableSort:m}),{pageCount:P,setItemsPerPage:r}=ne({page:u,itemsPerPage:b,itemsLength:T}),{flatItems:s}=me(y,l,h,()=>!!a["group-summary"]),{isSelected:f,select:I,selectAll:M,toggleSelect:j,someSelected:q,allSelected:U}=oe(e,{allItems:y,currentPage:y}),{isExpanded:J,toggleExpand:X}=ie(e),O=F(()=>E(y.value));se({page:u,itemsPerPage:b,sortBy:o,groupBy:l,search:g(()=>e.search)}),Te("v-data-table",{toggleSort:S,sortBy:o}),ve({VDataTableRows:{hideNoData:g(()=>e.hideNoData),noDataText:g(()=>e.noDataText),loading:g(()=>e.loading),loadingText:g(()=>e.loadingText)}});const d=F(()=>({page:u.value,itemsPerPage:b.value,sortBy:o.value,pageCount:P.value,toggleSort:S,setItemsPerPage:r,someSelected:q.value,allSelected:U.value,isSelected:f,select:I,selectAll:M,toggleSelect:j,isExpanded:J,toggleExpand:X,isGroupOpen:D,toggleGroup:k,items:O.value.map(R=>R.raw),internalItems:O.value,groupedItems:s.value,columns:p.value,headers:B.value}));be(()=>{const R=C.filterProps(e),z=G.filterProps(ye(e,["multiSort"])),K=H.filterProps(e),Q=W.filterProps(e);return x(W,w({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Q,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(d.value),default:()=>a.default?a.default(d.value):V(A,null,[a.colgroup?.(d.value),!e.hideDefaultHeader&&V("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[x(G,w(z,{multiSort:!!e.multiSort}),a)]),a.thead?.(d.value),!e.hideDefaultBody&&V("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a["body.prepend"]?.(d.value),a.body?a.body(d.value):x(H,w(i,K,{items:s.value}),a),a["body.append"]?.(d.value)]),a.tbody?.(d.value),a.tfoot?.(d.value)]),bottom:()=>a.bottom?a.bottom(d.value):!e.hideDefaultFooter&&V(A,null,[x(he,null,null),x(C,R,{prepend:a["footer.prepend"]})])})})}});var De=/\s/;function Ie(e){for(var t=e.length;t--&&De.test(e.charAt(t)););return t}var Ve=/^\s+/;function Be(e){return e&&e.slice(0,Ie(e)+1).replace(Ve,"")}function L(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _=NaN,ke=/^[-+]0x[0-9a-f]+$/i,Ee=/^0b[01]+$/i,Re=/^0o[0-7]+$/i,we=parseInt;function $(e){if(typeof e=="number")return e;if(Se(e))return _;if(L(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=L(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Be(e);var i=Ee.test(e);return i||Re.test(e)?we(e.slice(2),i?2:8):ke.test(e)?_:+e}var N=function(){return Pe.Date.now()},Fe="Expected a function",Ne=Math.max,Le=Math.min;function Ae(e,t,i){var a,l,v,o,n,c,u=0,b=!1,m=!1,T=!0;if(typeof e!="function")throw new TypeError(Fe);t=$(t)||0,L(i)&&(b=!!i.leading,m="maxWait"in i,v=m?Ne($(i.maxWait)||0,t):v,T="trailing"in i?!!i.trailing:T);function p(r){var s=a,f=l;return a=l=void 0,u=r,o=e.apply(f,s),o}function B(r){return u=r,n=setTimeout(h,t),b?p(r):o}function y(r){var s=r-c,f=r-u,I=t-s;return m?Le(I,v-f):I}function S(r){var s=r-c,f=r-u;return c===void 0||s>=t||s<0||m&&f>=v}function h(){var r=N();if(S(r))return D(r);n=setTimeout(h,y(r))}function D(r){return n=void 0,T&&a?p(r):(a=l=void 0,o)}function k(){n!==void 0&&clearTimeout(n),u=0,a=c=l=n=void 0}function E(){return n===void 0?o:D(N())}function P(){var r=N(),s=S(r);if(a=arguments,l=this,c=r,s){if(n===void 0)return B(c);if(m)return clearTimeout(n),n=setTimeout(h,t),p(c)}return n===void 0&&(n=setTimeout(h,t)),o}return P.cancel=k,P.flush=E,P}function _e(e){return{offset:(e.page-1)*e.itemsPerPage,limit:e.itemsPerPage,ordering:Oe(e),search:e.search}}function Oe(e){if(e.sortBy.length<=0)return;const t=e.sortBy[0];return t.order==="asc"?`${t.key}`:`-${t.key}`}export{We as V,Ae as d,_e as g};
//# sourceMappingURL=query_tools-D1ttn1y9.js.map
