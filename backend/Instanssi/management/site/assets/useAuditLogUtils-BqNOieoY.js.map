{"version":3,"file":"useAuditLogUtils-BqNOieoY.js","sources":["../../../../../admin/src/components/auditlog/DiffViewer.vue","../../../../../admin/src/composables/useAuditLogUtils.ts"],"sourcesContent":["<template>\n    <div class=\"diff-viewer\">\n        <template v-if=\"Object.keys(changes).length > 0\">\n            <div v-for=\"(value, field) in changes\" :key=\"field\" class=\"diff-field mb-2\">\n                <span class=\"diff-field-name font-weight-medium\">{{ field }}:</span>\n                <div v-if=\"Array.isArray(value) && value.length === 2\" class=\"diff-values\">\n                    <span class=\"diff-old text-error\">{{ formatValue(value[0]) }}</span>\n                    <span class=\"diff-arrow mx-1\">â†’</span>\n                    <span class=\"diff-new text-success\">{{ formatValue(value[1]) }}</span>\n                </div>\n                <div v-else class=\"diff-value\">\n                    <span class=\"text-success\">{{ formatValue(value) }}</span>\n                </div>\n            </div>\n        </template>\n        <span v-else class=\"text-grey\">{{ t(\"AuditLogTable.noChanges\") }}</span>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useI18n } from \"vue-i18n\";\n\ndefineProps<{\n    changes: Record<string, unknown>;\n}>();\n\nconst { t } = useI18n();\n\nfunction formatValue(value: unknown): string {\n    if (value === null || value === undefined) {\n        return \"null\";\n    }\n    if (typeof value === \"boolean\") {\n        return value ? \"true\" : \"false\";\n    }\n    if (typeof value === \"object\") {\n        return JSON.stringify(value);\n    }\n    const str = String(value);\n    if (str.length > 100) {\n        return str.substring(0, 100) + \"...\";\n    }\n    return str;\n}\n</script>\n\n<style scoped>\n.diff-viewer {\n    font-size: 0.875rem;\n}\n\n.diff-field {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.25rem;\n    align-items: baseline;\n}\n\n.diff-field-name {\n    min-width: 100px;\n}\n\n.diff-values {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: baseline;\n    gap: 0.25rem;\n}\n\n.diff-old {\n    text-decoration: line-through;\n}\n\n.diff-arrow {\n    color: #666;\n}\n</style>\n","import { useI18n } from \"vue-i18n\";\n\nexport interface LoadOptions {\n    page: number;\n    itemsPerPage: number;\n    sortBy: { key: string; order: \"asc\" | \"desc\" }[];\n}\n\n/**\n * Composable for shared audit log utilities.\n * Provides action label and color mappings for audit log entries.\n */\nexport function useAuditLogUtils() {\n    const { t } = useI18n();\n\n    /**\n     * Get a human-readable label for an audit log action.\n     * @param action - The action number (0=create, 1=update, 2=delete, 3=access)\n     * @param translationPrefix - The translation key prefix (e.g., \"AuditLogTable\" or \"AuditLogView\")\n     */\n    function actionLabel(action: number, translationPrefix: string = \"AuditLogTable\"): string {\n        switch (action) {\n            case 0:\n                return t(`${translationPrefix}.actions.create`);\n            case 1:\n                return t(`${translationPrefix}.actions.update`);\n            case 2:\n                return t(`${translationPrefix}.actions.delete`);\n            case 3:\n                return t(`${translationPrefix}.actions.access`);\n            default:\n                return t(`${translationPrefix}.actions.unknown`);\n        }\n    }\n\n    /**\n     * Get a color for an audit log action chip.\n     * @param action - The action number (0=create, 1=update, 2=delete, 3=access)\n     */\n    function actionColor(action: number): string {\n        switch (action) {\n            case 0:\n                return \"success\";\n            case 1:\n                return \"warning\";\n            case 2:\n                return \"error\";\n            case 3:\n                return \"info\";\n            default:\n                return \"grey\";\n        }\n    }\n\n    return {\n        actionLabel,\n        actionColor,\n    };\n}\n"],"names":["t","useI18n","formatValue","value","str","_openBlock","_createElementBlock","_hoisted_1","__props","_Fragment","_renderList","field","_createElementVNode","_hoisted_2","_toDisplayString","_hoisted_3","_hoisted_4","_cache","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_unref","useAuditLogUtils","actionLabel","action","translationPrefix","actionColor"],"mappings":"2ZA0BA,KAAM,CAAE,EAAAA,CAAA,EAAMC,EAAA,EAEd,SAASC,EAAYC,EAAwB,CACzC,GAAIA,GAAU,KACV,MAAO,OAEX,GAAI,OAAOA,GAAU,UACjB,OAAOA,EAAQ,OAAS,QAE5B,GAAI,OAAOA,GAAU,SACjB,OAAO,KAAK,UAAUA,CAAK,EAE/B,MAAMC,EAAM,OAAOD,CAAK,EACxB,OAAIC,EAAI,OAAS,IACNA,EAAI,UAAU,EAAG,GAAG,EAAI,MAE5BA,CACX,eA1CIC,EAAA,EAAAC,EAeM,MAfNC,EAeM,CAdc,OAAO,KAAKC,EAAA,OAAO,EAAE,OAAM,GACvCH,EAAA,EAAA,EAAAC,EAUMG,EAAA,CAAA,IAAA,GAAAC,EAVwBF,EAAA,QAAO,CAAxBL,EAAOQ,SAApBL,EAUM,MAAA,CAVkC,IAAKK,EAAO,MAAM,iBAAA,GACtDC,EAAoE,OAApEC,EAAoEC,EAAhBH,CAAK,EAAG,IAAC,CAAA,EAClD,MAAM,QAAQR,CAAK,GAAKA,EAAM,SAAM,GAA/CE,EAAA,EAAAC,EAIM,MAJNS,EAIM,CAHFH,EAAoE,OAApEI,EAAoEF,EAA/BZ,EAAYC,EAAK,CAAA,CAAA,CAAA,EAAA,CAAA,EACtDc,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAL,EAAsC,OAAA,CAAhC,MAAM,iBAAA,EAAkB,IAAC,EAAA,GAC/BA,EAAsE,OAAtEM,EAAsEJ,EAA/BZ,EAAYC,EAAK,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,KAE5DE,EAAA,EAAAC,EAEM,MAFNa,EAEM,CADFP,EAA0D,OAA1DQ,EAA0DN,EAA5BZ,EAAYC,CAAK,CAAA,EAAA,CAAA,CAAA,mBAI3DG,EAAwE,OAAxEe,EAAwEP,EAAtCQ,EAAAtB,CAAA,EAAC,yBAAA,CAAA,EAAA,CAAA,EAAA,gDCHpC,SAASuB,GAAmB,CAC/B,KAAM,CAAE,CAAA,EAAMtB,EAAA,EAOd,SAASuB,EAAYC,EAAgBC,EAA4B,gBAAyB,CACtF,OAAQD,EAAA,CACJ,IAAK,GACD,OAAO,EAAE,GAAGC,CAAiB,iBAAiB,EAClD,IAAK,GACD,OAAO,EAAE,GAAGA,CAAiB,iBAAiB,EAClD,IAAK,GACD,OAAO,EAAE,GAAGA,CAAiB,iBAAiB,EAClD,IAAK,GACD,OAAO,EAAE,GAAGA,CAAiB,iBAAiB,EAClD,QACI,OAAO,EAAE,GAAGA,CAAiB,kBAAkB,CAAA,CAE3D,CAMA,SAASC,EAAYF,EAAwB,CACzC,OAAQA,EAAA,CACJ,IAAK,GACD,MAAO,UACX,IAAK,GACD,MAAO,UACX,IAAK,GACD,MAAO,QACX,IAAK,GACD,MAAO,OACX,QACI,MAAO,MAAA,CAEnB,CAEA,MAAO,CACH,YAAAD,EACA,YAAAG,CAAA,CAER"}