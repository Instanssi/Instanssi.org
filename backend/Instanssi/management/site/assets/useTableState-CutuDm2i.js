import{dh as q,u as L,L as E,s as I,I as A}from"./index-CQkWvXOv.js";import{i as R,r as U}from"./LayoutBase.vue_vue_type_script_setup_true_lang-D5aCeQDf.js";var C=/\s/;function M(t){for(var n=t.length;n--&&C.test(t.charAt(n)););return n}var $=/^\s+/;function j(t){return t&&t.slice(0,M(t)+1).replace($,"")}function P(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var F=NaN,D=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,z=/^0o[0-7]+$/i,H=parseInt;function W(t){if(typeof t=="number")return t;if(R(t))return F;if(P(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=P(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=j(t);var l=_.test(t);return l||z.test(t)?H(t.slice(2),l?2:8):D.test(t)?F:+t}var N=function(){return U.Date.now()},K="Expected a function",Q=Math.max,X=Math.min;function G(t,n,l){var c,p,g,d,i,u,o=0,f=!1,s=!1,a=!0;if(typeof t!="function")throw new TypeError(K);n=W(n)||0,P(l)&&(f=!!l.leading,s="maxWait"in l,g=s?Q(W(l.maxWait)||0,n):g,a="trailing"in l?!!l.trailing:a);function y(e){var r=c,v=p;return c=p=void 0,o=e,d=t.apply(v,r),d}function b(e){return o=e,i=setTimeout(h,n),f?y(e):d}function m(e){var r=e-u,v=e-o,k=n-r;return s?X(k,g-v):k}function x(e){var r=e-u,v=e-o;return u===void 0||r>=n||r<0||s&&v>=g}function h(){var e=N();if(x(e))return T(e);i=setTimeout(h,m(e))}function T(e){return i=void 0,a&&c?y(e):(c=p=void 0,d)}function B(){i!==void 0&&clearTimeout(i),o=0,c=u=p=i=void 0}function S(){return i===void 0?d:T(N())}function O(){var e=N(),r=x(e);if(c=arguments,p=this,u=e,r){if(i===void 0)return b(u);if(s)return clearTimeout(i),i=setTimeout(h,n),y(u)}return i===void 0&&(i=setTimeout(h,n)),d}return O.cancel=B,O.flush=S,O}function Y(t={}){const{defaultPerPage:n=25,pageSizeOptions:l=[25,50,100],filterKeys:c=[],urlUpdateDelay:p=100}=t,g=q(),d=L(),i=I(1),u=I(n),o=I(""),f=I(null),s=I("asc"),a=I({});for(const e of c)a.value[e]=null;function y(){const e=g.query;if(e.page&&typeof e.page=="string"){const r=parseInt(e.page,10);!isNaN(r)&&r>0&&(i.value=r)}else i.value=1;if(e.perPage&&typeof e.perPage=="string"){const r=parseInt(e.perPage,10);!isNaN(r)&&l.includes(r)&&(u.value=r)}else u.value=n;e.search&&typeof e.search=="string"?o.value=e.search:o.value="",e.sortBy&&typeof e.sortBy=="string"?f.value=e.sortBy:f.value=null,e.sortOrder&&typeof e.sortOrder=="string"?(e.sortOrder==="asc"||e.sortOrder==="desc")&&(s.value=e.sortOrder):s.value="asc";for(const r of c)e[r]&&typeof e[r]=="string"?a.value[r]=e[r]:a.value[r]=null}y();function b(){const e={};i.value!==1&&(e.page=String(i.value)),u.value!==n&&(e.perPage=String(u.value)),o.value&&(e.search=o.value),f.value&&(e.sortBy=f.value,s.value!=="asc"&&(e.sortOrder=s.value));for(const r of c)a.value[r]!==null&&a.value[r]!==""&&(e[r]=a.value[r]);return e}const m=G(()=>{const e=b();d.replace({query:e})},p);function x(e){i.value=e.page,u.value=e.itemsPerPage,o.value=e.search,e.sortBy.length>0?(f.value=e.sortBy[0].key,s.value=e.sortBy[0].order):(f.value=null,s.value="asc"),m()}function h(e){const r=a.value[e];if(r==null||r==="")return null;const v=parseInt(r,10);return isNaN(v)?null:v}function T(e,r){r===null||r===""?a.value[e]=null:a.value[e]=String(r),m()}function B(){i.value=1,m()}function S(e){return A({get:()=>{const r=a.value[e];return r==="true"?!0:r==="false"?!1:null},set:r=>{T(e,r===null?null:String(r)),B()}})}const O=A(()=>f.value?[{key:f.value,order:s.value}]:[]);return E(()=>g.query,()=>{y()}),E(a,()=>{m()},{deep:!0}),{page:i,perPage:u,search:o,sortBy:f,sortOrder:s,sortByArray:O,filters:a,pageSizeOptions:l,onOptionsUpdate:x,getFilterAsNumber:h,setFilter:T,resetPage:B,useBooleanFilter:S}}export{G as d,Y as u};
//# sourceMappingURL=useTableState-CutuDm2i.js.map
